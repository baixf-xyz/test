

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/pi.jpg">
  <link rel="icon" type="image/png" href="/img/pi.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="ç™½å°é£">
  <meta name="keywords" content="">
  <title>Dockeræ·±å…¥å­¦ä¹  - ç™½å°é£ã®blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.1.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"blog.baixf.tk","root":"/","version":"1.8.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"copy_btn":true,"image_zoom":{"enable":true},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":true,"baidu":"32cfe221d23ea3ac2ca847f1e865c570","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>ç™½å°é£ã®Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/dockerfile.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Dockeræ·±å…¥å­¦ä¹ ">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-01-20 20:01" pubdate>
        2021å¹´1æœˆ20æ—¥ æ™šä¸Š
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      8.1k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      128
       åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Dockeræ·±å…¥å­¦ä¹ </h1>
            
            <div class="markdown-body">
              <h2 id="Dockerå®¹å™¨å­¦ä¹ ç¬”è®°â…¡ï¼ˆç‹‚ç¥è¯´Javaï¼‰"><a href="#Dockerå®¹å™¨å­¦ä¹ ç¬”è®°â…¡ï¼ˆç‹‚ç¥è¯´Javaï¼‰" class="headerlink" title="Dockerå®¹å™¨å­¦ä¹ ç¬”è®°â…¡ï¼ˆç‹‚ç¥è¯´Javaï¼‰"></a>Dockerå®¹å™¨å­¦ä¹ ç¬”è®°â…¡ï¼ˆç‹‚ç¥è¯´Javaï¼‰</h2><p>ç‹‚ç¥è¯´Bç«™è§†é¢‘ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1og4y1q7M4?p=1">https://www.bilibili.com/video/BV1og4y1q7M4?p=1</a></p>
<p>å­¦ä¹ dockerï¼š<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></p>
<p>ä½¿ç”¨dockerï¼š<a target="_blank" rel="noopener" href="https://labs.play-with-docker.com/">https://labs.play-with-docker.com/</a></p>
<h2 id="ä¸€ã€å¤§çº²"><a href="#ä¸€ã€å¤§çº²" class="headerlink" title="ä¸€ã€å¤§çº²"></a>ä¸€ã€å¤§çº²</h2><p><strong>å…¥é—¨ï¼š</strong></p>
<ul>
<li><p>Dockeræ¦‚è¿°</p>
</li>
<li><p>Dockerå®‰è£…</p>
</li>
<li><p>Dockerå‘½ä»¤</p>
<ul>
<li>é•œåƒå‘½ä»¤</li>
<li>å®¹å™¨å‘½ä»¤</li>
<li>æ“ä½œå‘½ä»¤</li>
<li>â€¦â€¦</li>
</ul>
</li>
<li><p>Dockeré•œåƒ</p>
</li>
</ul>
<p><strong>ç²¾é«“ï¼š</strong></p>
<ul>
<li><p>å®¹å™¨æ•°æ®å·</p>
</li>
<li><p>DockerFile</p>
</li>
<li><p>Dockerç½‘ç»œåŸç†</p>
</li>
</ul>
<p><strong>ä¼ä¸šçº§ï¼š</strong></p>
<ul>
<li><p>IDEAæ•´åˆDocker</p>
</li>
<li><p>é›†ç¾¤</p>
<ul>
<li>Docker Compose</li>
<li>Docker Swarm</li>
</ul>
</li>
<li><p>CI/CD Jenkinsæµæ°´çº¿</p>
</li>
</ul>
<h2 id="ä¸ƒã€å®¹å™¨æ•°æ®å·"><a href="#ä¸ƒã€å®¹å™¨æ•°æ®å·" class="headerlink" title="ä¸ƒã€å®¹å™¨æ•°æ®å·"></a>ä¸ƒã€å®¹å™¨æ•°æ®å·</h2><h3 id="1-ä»€ä¹ˆæ˜¯å®¹å™¨å·ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯å®¹å™¨å·ï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯å®¹å™¨å·ï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯å®¹å™¨å·ï¼Ÿ</h3><p>dockerçš„ç†å¿µå›é¡¾</p>
<p>å°†åº”ç”¨å’Œç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªé•œåƒï¼</p>
<p>æ•°æ®ï¼Ÿå¦‚æœæ•°æ®éƒ½åœ¨å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®¹å™¨åˆ é™¤ï¼Œæ•°æ®å°±ä¼šä¸¢å¤±ï¼éœ€æ±‚ï¼šæ•°æ®å¯ä»¥æŒä¹…åŒ–</p>
<p>MySQLï¼Œå®¹å™¨åˆ é™¤äº†ï¼Œåˆ åº“è·‘è·¯ï¼éœ€æ±‚ï¼šMySQLæ•°æ®å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ï¼</p>
<p>å®¹å™¨ä¹‹é—´å¯ä»¥æœ‰ä¸€ä¸ªæ•°æ®å…±äº«çš„æŠ€æœ¯ï¼Dockerå®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®ï¼ŒåŒæ­¥åˆ°æœ¬åœ°ï¼</p>
<p>è¿™å°±æ˜¯å·æŠ€æœ¯ï¼ç›®å½•çš„æŒ‚è½½ï¼Œå°†æˆ‘ä»¬å®¹å™¨å†…çš„ç›®å½•ï¼ŒæŒ‚è½½åˆ°Linuxä¸Šé¢ï¼</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210118184134.png" srcset="/img/loading.gif" alt=""></p>
<p>æ€»ç»“ä¸€å¥è¯ï¼šå®¹å™¨çš„æŒä¹…åŒ–å’ŒåŒæ­¥æ“ä½œï¼å®¹å™¨é—´ä¹Ÿæ˜¯å¯ä»¥æ•°æ®å…±äº«çš„ï¼</p>
<h3 id="2-ä½¿ç”¨æ•°æ®å·"><a href="#2-ä½¿ç”¨æ•°æ®å·" class="headerlink" title="2.ä½¿ç”¨æ•°æ®å·"></a>2.ä½¿ç”¨æ•°æ®å·</h3><blockquote>
<p>æ–¹å¼ä¸€ ï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤æŒ‚è½½ -v</p>
</blockquote>
<pre><code class="hljs shell">pi@raspbian:~$ docker volume --help

Usage:  docker volume COMMAND

Manage volumes

Commands:
  create      Create a volume
  inspect     Display detailed information on one or more volumes
  ls          List volumes
  prune       Remove all unused local volumes
  rm          Remove one or more volumes

Run &#x27;docker volume COMMAND --help&#x27; for more information on a command.</code></pre>
<pre><code class="hljs shell">-v, --volume list Bind mount a volume
docker run -it -v ä¸»æœºç›®å½•:å®¹å™¨å†…ç›®å½• -p ä¸»æœºç«¯å£:å®¹å™¨å†…ç«¯å£
âœ ~ docker run -it -v /home/ceshi:/home centos /bin/bash
<span class="hljs-meta">#</span><span class="bash">é€šè¿‡ docker inspect å®¹å™¨id æŸ¥çœ‹</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210118185009.png" srcset="/img/loading.gif" alt=""></p>
<p>å†æ¥æµ‹è¯•ï¼</p>
<p>1ã€åœæ­¢å®¹å™¨</p>
<p>2ã€å®¿ä¸»æœºä¿®æ”¹æ–‡ä»¶</p>
<p>3ã€å¯åŠ¨å®¹å™¨</p>
<p>4ã€å®¹å™¨å†…çš„æ•°æ®ä¾æ—§æ˜¯åŒæ­¥çš„</p>
<p>å¥½å¤„ï¼šæˆ‘ä»¬ä»¥åä¿®æ”¹åªéœ€è¦åœ¨æœ¬åœ°ä¿®æ”¹å³å¯ï¼Œå®¹å™¨å†…ä¼šè‡ªåŠ¨åŒæ­¥ï¼</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210118190945.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="3-å®æˆ˜ï¼šå®‰è£…MySQL"><a href="#3-å®æˆ˜ï¼šå®‰è£…MySQL" class="headerlink" title="3.å®æˆ˜ï¼šå®‰è£…MySQL"></a>3.å®æˆ˜ï¼šå®‰è£…MySQL</h3><p>æ€è€ƒï¼šMySQLçš„æ•°æ®æŒä¹…åŒ–çš„é—®é¢˜</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> è·å–mysqlé•œåƒ</span></code></pre>
<pre><code class="hljs shell">[root@iZ8vb2p24tqw8n1tpvr1b9Z ~]# docker pull mysql
Using default tag: latest
latest: Pulling from library/mysql
a076a628af6f: Pull complete 
f6c208f3f991: Pull complete 
88a9455a9165: Pull complete 
406c9b8427c6: Pull complete 
7c88599c0b25: Pull complete 
25b5c6debdaf: Pull complete 
43a5816f1617: Pull complete 
1a8c919e89bf: Pull complete 
9f3cf4bd1a07: Pull complete 
80539cea118d: Pull complete 
201b3cad54ce: Pull complete 
944ba37e1c06: Pull complete 
Digest: sha256:feada149cb8ff54eade1336da7c1d080c4a1c7ed82b5e320efb5beebed85ae8c
Status: Downloaded newer image for mysql:latest
docker.io/library/mysql:latest</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> è¿è¡Œå®¹å™¨,éœ€è¦åšæ•°æ®æŒ‚è½½ <span class="hljs-comment">#å®‰è£…å¯åŠ¨mysqlï¼Œéœ€è¦é…ç½®å¯†ç çš„ï¼Œè¿™æ˜¯è¦æ³¨æ„ç‚¹ï¼</span></span>
<span class="hljs-meta">#</span><span class="bash"> å‚è€ƒå®˜ç½‘hub  https://hub.docker.com/_/mysql</span>
docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d
mysql:tag
<span class="hljs-meta">#</span><span class="bash">å¯åŠ¨æˆ‘ä»¬å¾—</span>
-d åå°è¿è¡Œ
-p ç«¯å£æ˜ å°„
-v å·æŒ‚è½½
-e ç¯å¢ƒé…ç½®
-- name å®¹å™¨åå­—</code></pre>
<pre><code class="hljs shell">[root@iZ8vb2p24tqw8n1tpvr1b9Z ~]# docker run -d -p 3310:3306 -v /home/mysql/conf:/etc/mysql/conf -v /home/mysql/data:/etc/mysql/data -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:latest
82f5b7eb56016504512959ec881fc4760456bb62a614ca8aaa1e4cb7d98ad4ec</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å¯åŠ¨æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨sqlyogæ¥æµ‹è¯•ä¸€ä¸‹</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119150146.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> native-è¿æ¥åˆ°æœåŠ¡å™¨çš„3306--å’Œå®¹å™¨å†…çš„3306æ˜ å°„</span>
<span class="hljs-meta">#</span><span class="bash"> åœ¨æœ¬åœ°æµ‹è¯•åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼ŒæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬æ˜ å°„çš„è·¯å¾„æ˜¯å¦okï¼</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119152005.png" srcset="/img/loading.gif" alt=""></p>
<p>å‡è®¾æˆ‘ä»¬å°†å®¹å™¨åˆ é™¤ ï¼š<br><pre><code class="hljs shell">[root@iZ8vb2p24tqw8n1tpvr1b9Z mysql]# docker rm -f 82f5b7eb5601
82f5b7eb5601
[root@iZ8vb2p24tqw8n1tpvr1b9Z mysql]# ls
conf  data
[root@iZ8vb2p24tqw8n1tpvr1b9Z mysql]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
mysql               latest              c8562eaf9d81        8 hours ago         546MB
wiznote/wizserver   latest              34c5a021e1c1        6 months ago        1.75GB
elasticsearch       latest              5acf0e8da90b        2 years ago         486MB
[root@iZ8vb2p24tqw8n1tpvr1b9Z mysql]# docker ps 
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
[root@iZ8vb2p24tqw8n1tpvr1b9Z mysql]# docker ps -a
CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                     PORTS               NAMES
f84fe6e51312        wiznote/wizserver          &quot;bash /wiz/app/entryâ€¦&quot;   2 hours ago         Created                                        optimistic_proskuriakova
3de71bbb3db7        34c5a021e1c1               &quot;bash /wiz/app/entryâ€¦&quot;   2 hours ago         Created                                        nice_kalam
9517379c5255        34c5a021e1c1               &quot;-p 80:6666&quot;             2 hours ago         Created                                        distracted_satoshi
0ef8cabd3bb7        wiznote/wizserver:latest   &quot;bash /wiz/app/entryâ€¦&quot;   2 months ago        Exited (137) 3 hours ago                       WizNode</code></pre><br>å‘ç°ï¼Œæˆ‘ä»¬æŒ‚è½½åˆ°æœ¬åœ°çš„æ•°æ®å·ä¾æ—§æ²¡æœ‰ä¸¢å¤±ï¼Œè¿™å°±å®ç°äº†å®¹å™¨æ•°æ®æŒä¹…åŒ–åŠŸèƒ½ã€‚</p>
<h3 id="4-å…·åå’ŒåŒ¿åæŒ‚è½½"><a href="#4-å…·åå’ŒåŒ¿åæŒ‚è½½" class="headerlink" title="4.å…·åå’ŒåŒ¿åæŒ‚è½½"></a>4.å…·åå’ŒåŒ¿åæŒ‚è½½</h3><p>æ‰€æœ‰çš„dockerå®¹å™¨å†…çš„å·ï¼Œæ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨ /var/lib/docker/volumes/xxxx/_data<br>ä¸‹å¦‚æœæŒ‡å®šäº†ç›®å½•ï¼Œdocker volume ls æ˜¯æŸ¥çœ‹ä¸åˆ°çš„ã€‚</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> åŒ¿åæŒ‚è½½</span>
-v å®¹å™¨å†…è·¯å¾„!</code></pre>
<pre><code class="hljs shell">pi@raspbian:~$ docker run -d -P  -v /etc/nginx nginx
b60ee929f32fdbc2d0f98aad67dc85ca2e3ebe29450d02114657b87d88622e80</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹æ‰€æœ‰çš„volumeçš„æƒ…å†µ</span>
pi@raspbian:~$ docker ps
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                   NAMES
b60ee929f32f   nginx     &quot;/docker-entrypoint.â€¦&quot;   24 seconds ago   Up 21 seconds   0.0.0.0:49153-&gt;80/tcp   lucid_blackwell
pi@raspbian:~$ docker volume ls
DRIVER    VOLUME NAME
local     754e0542ce40a802a3bf79df05c44ccff9b137347153b8ce7988f49f0455b732</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> è¿™é‡Œå‘ç°ï¼Œè¿™ç§å°±æ˜¯åŒ¿åæŒ‚è½½ï¼Œæˆ‘ä»¬åœ¨ -våªå†™äº†å®¹å™¨å†…çš„è·¯å¾„ï¼Œæ²¡æœ‰å†™å®¹å™¨å¤–çš„è·¯å¾„ï¼</span>

<span class="hljs-meta">#</span><span class="bash"> å…·åæŒ‚è½½</span>
pi@raspbian:~$ docker run -d -P --name nginx02 -v juming-nginx:/etc/nginx nginx
f89ce3a25e626a69d70c2b903d5cd68b53cbe5594485e0c5b843ccc2508c28d9
pi@raspbian:~$ docker volume ls
DRIVER    VOLUME NAME
local     754e0542ce40a802a3bf79df05c44ccff9b137347153b8ce7988f49f0455b732
local     juming-nginx

<span class="hljs-meta">#</span><span class="bash"> é€šè¿‡ -v å·åï¼šå®¹å™¨å†…è·¯å¾„</span>
<span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå·</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119161603.png" srcset="/img/loading.gif" alt=""></p>
<p>æ‰€æœ‰çš„dockerå®¹å™¨å†…çš„å·ï¼Œæ²¡æœ‰æŒ‡å®šç›®å½•çš„æƒ…å†µä¸‹éƒ½æ˜¯åœ¨ <code>/var/lib/docker/volumes/xxxx/_data</code>ä¸‹ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119162957.png" srcset="/img/loading.gif" alt=""></p>
<p>å¦‚æœæŒ‡å®šäº†ç›®å½•ï¼Œdocker volume ls æ˜¯æŸ¥çœ‹ä¸åˆ°çš„ã€‚</p>
<pre><code class="hljs shell">pi@raspbian:~$ docker run -d -P -v /home/nginx:/etc/nginx nginx
38c0e3bab52fc8f411e8078c17c43a39aa3a98081ab021a96e9d32855b41dc01
pi@raspbian:~$ docker volume ls
DRIVER    VOLUME NAME
local     754e0542ce40a802a3bf79df05c44ccff9b137347153b8ce7988f49f0455b732
local     juming-nginx</code></pre>
<p><strong>å¦‚ä½•åŒºåˆ«åŒ¿åæŒ‚è½½ã€å…·åæŒ‚è½½ã€æŒ‡å®šè·¯å¾„æŒ‚è½½</strong></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> ä¸‰ç§æŒ‚è½½ï¼š åŒ¿åæŒ‚è½½ã€å…·åæŒ‚è½½ã€æŒ‡å®šè·¯å¾„æŒ‚è½½</span>

-v å®¹å™¨å†…è·¯å¾„ #åŒ¿åæŒ‚è½½
-v å·åï¼šå®¹å™¨å†…è·¯å¾„ #å…·åæŒ‚è½½
-v /å®¿ä¸»æœºè·¯å¾„ï¼šå®¹å™¨å†…è·¯å¾„ #æŒ‡å®šè·¯å¾„æŒ‚è½½ docker volume ls æ˜¯æŸ¥çœ‹ä¸åˆ°çš„</code></pre>
<p> <strong>æ‹“å±•</strong></p>
<p><strong>ro</strong>  <strong>rw</strong> æ”¹å˜è¯»å†™æƒé™</p>
<pre><code class="hljs shell">ro #readonly åªè¯»
rw #readwrite å¯è¯»å¯å†™

docker run -d -P --name nginx05 -v juming:/etc/nginx:ro nginx
docker run -d -P --name nginx05 -v juming:/etc/nginx:rw nginx
<span class="hljs-meta">#</span><span class="bash"> ro åªè¦çœ‹åˆ°roå°±è¯´æ˜è¿™ä¸ªè·¯å¾„åªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥æ“ä½œï¼Œå®¹å™¨å†…éƒ¨æ˜¯æ— æ³•æ“ä½œï¼</span></code></pre>
<h3 id="5-åˆè¯†Dockerfile"><a href="#5-åˆè¯†Dockerfile" class="headerlink" title="5.åˆè¯†Dockerfile"></a>5.åˆè¯†Dockerfile</h3><blockquote>
<p>æŒ‚è½½çš„æ–¹å¼äºŒ</p>
</blockquote>
<p> Dockerfile å°±æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ„å»ºæ–‡ä»¶ï¼å‘½ä»¤è„šæœ¬ï¼å…ˆä½“éªŒä¸€ä¸‹ï¼</p>
<p>é€šè¿‡è¿™ä¸ªè„šæœ¬å¯ä»¥ç”Ÿæˆé•œåƒï¼Œé•œåƒã€‚å¯åŠ¨è‡ªå·±å†™çš„é•œåƒã€‚</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> åˆ›å»ºä¸€ä¸ªdockerfileæ–‡ä»¶ï¼Œåå­—å¯ä»¥éšä¾¿ å»ºè®®Dockerfile</span>
<span class="hljs-meta">#</span><span class="bash"> æ–‡ä»¶ä¸­çš„å†…å®¹ æŒ‡ä»¤(å¤§å†™) å‚æ•°</span>
FROM centos
VOLUME [&quot;volume01&quot;,&quot;volume02&quot;]
CMD echo &quot;----end----&quot;
CMD /bin/bash
<span class="hljs-meta">#</span><span class="bash">è¿™é‡Œçš„æ¯ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯é•œåƒçš„ä¸€å±‚ï¼</span></code></pre>
<pre><code class="hljs shell">pi@raspbian:~/docker-test$ docker build -f dockerfile01 -t baixf/centos .</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119164447.png" srcset="/img/loading.gif" alt=""></p>
<p>è¿›å…¥ç”Ÿæˆçš„é•œåƒï¼ŒæŸ¥çœ‹ä¸€ä¸‹å·æŒ‚è½½</p>
<pre><code class="hljs shell">docker run -it baixf/centos /bin/bash</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119164759.png" srcset="/img/loading.gif" alt=""></p>
<p>è¿™ä¸ªå·åœ¨ä¸»æœºä¸€å®šæœ‰ä¸€ä¸ªåŒæ­¥ç›®å½•ï¼ˆåŒ¿åæŒ‚è½½ï¼‰ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119165325.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119165355.png" srcset="/img/loading.gif" alt=""></p>
<p>åœ¨<code>baixf/centos</code>æµ‹è¯•ä¸€ä¸‹<code>/volume1/ï¿¥ï¿¥</code>æ–°å»ºæ–‡ä»¶çœ‹åŒæ­¥å‡ºå»äº†ï¼</p>
<p>è¿™ç§æ–¹å¼ä½¿ç”¨çš„ååˆ†å¤šï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸ä¼šæ„å»ºè‡ªå·±çš„é•œåƒï¼</p>
<p><strong>å‡è®¾æ„å»ºé•œåƒæ—¶å€™æ²¡æœ‰æŒ‚è½½å·ï¼Œè¦æ‰‹åŠ¨é•œåƒæŒ‚è½½ -v å·åï¼šå®¹å™¨å†…è·¯å¾„ï¼</strong></p>
<h3 id="6-æ•°æ®å·å®¹å™¨"><a href="#6-æ•°æ®å·å®¹å™¨" class="headerlink" title="6.æ•°æ®å·å®¹å™¨"></a>6.æ•°æ®å·å®¹å™¨</h3><p>å¤šä¸ªMySQLåŒæ­¥æ•°æ®ï¼</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119171148.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> centos01ä¸ºçˆ¶å®¹å™¨</span></code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å¯åŠ¨3ä¸ªå®¹å™¨</span></code></pre>
<p>1.å¯åŠ¨docker01</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119173535.png" srcset="/img/loading.gif" alt=""></p>
<p>2.å¯åŠ¨docker02å¹¶åœ¨æ•°æ®å·<code>volume01</code>å†…æ–°å»ºæ–‡ä»¶</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119173805.png" srcset="/img/loading.gif" alt=""></p>
<p>3.æ£€æŸ¥docker01ä¸­çš„<code>volume01</code>ä¸­æ˜¯å¦æœ‰è¿™ä¸ªæ–‡ä»¶ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119173927.png" srcset="/img/loading.gif" alt=""></p>
<p>4.æ–°å»ºdocker03ç»§æ‰¿<code>docker01</code>ï¼Œå¹¶æŸ¥çœ‹<code>volume01</code>å†…æ˜¯å¦æœ‰åˆšåˆšæ–°å»ºçš„æ–‡ä»¶ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119174736.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119174809.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119174832.png" srcset="/img/loading.gif" alt=""></p>
<p>5.åˆ é™¤docker01å®¹å™¨ï¼ŒæŸ¥çœ‹docker02 d0cker03æ•°æ®æ˜¯å¦è¿˜å­˜åœ¨ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119175310.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119175349.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119175420.png" srcset="/img/loading.gif" alt=""></p>
<p>6.æ­¤æ—¶åœ¨docker02ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶æŸ¥çœ‹docker03èƒ½å¦åŒæ­¥ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119175632.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119175724.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>ä»¥ä¸Šä¾‹å­æ‰€ç¤ºï¼Œdocker02 03å…±åŒç»§æ‰¿docker01ï¼Œå¦‚æœå°†docker01åˆ é™¤ï¼Œdocker02 03 ä»ä¿ç•™æ•°æ®ï¼Œdocker02 03ä»å¯åŒæ­¥æ•°æ®ã€‚</strong></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119180428.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>å¤šä¸ªmysqlå®ç°æ•°æ®å…±äº«</strong> </p>
<pre><code class="hljs shell">âœ ~ docker run -d -p 3306:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v
/home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01
mysql:5.7

âœ ~ docker run -d -p 3307:3306 -e MYSQL_ROOT_PASSWORD=123456 --name
mysql02 --volumes-from mysql01 mysql:5.7

<span class="hljs-meta">#</span><span class="bash"> è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥å®ç°ä¸¤ä¸ªå®¹å™¨æ•°æ®åŒæ­¥ï¼</span></code></pre>
<p><strong>ç»“è®ºï¼š</strong></p>
<p>å®¹å™¨ä¹‹é—´bingçš„é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä¸ºæ­¢ã€‚(ç—…æ¯’)</p>
<p>ä½†æ˜¯ä¸€æ—¦ä½ æŒä¹…åŒ–åˆ°äº†æœ¬åœ°ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæœ¬åœ°çš„æ•°æ®æ˜¯ä¸ä¼šåˆ é™¤çš„ï¼</p>
<h2 id="å…«ã€DockerFile"><a href="#å…«ã€DockerFile" class="headerlink" title="å…«ã€DockerFile"></a>å…«ã€DockerFile</h2><h3 id="1-DockerFileä»‹ç»"><a href="#1-DockerFileä»‹ç»" class="headerlink" title="1.DockerFileä»‹ç»"></a>1.DockerFileä»‹ç»</h3><p>dockerfile æ˜¯ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶ï¼å‘½ä»¤å‚æ•°è„šæœ¬ï¼</p>
<p><strong>æ„å»ºæ­¥éª¤ï¼š</strong></p>
<p>1ã€ ç¼–å†™ä¸€ä¸ªdockerfileæ–‡ä»¶</p>
<p>2ã€ docker build æ„å»ºç§°ä¸ºä¸€ä¸ªé•œåƒ</p>
<p>3ã€ docker runè¿è¡Œé•œåƒ</p>
<p>4ã€ docker pushå‘å¸ƒé•œåƒï¼ˆDockerHub ã€é˜¿é‡Œäº‘ä»“åº“)</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119192401.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119192459.png" srcset="/img/loading.gif" alt=""></p>
<p>ä½†æ˜¯å¾ˆå¤šå®˜æ–¹é•œåƒéƒ½æ˜¯åŸºç¡€åŒ…ï¼Œå¾ˆå¤šåŠŸèƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè‡ªå·±æ­å»ºè‡ªå·±çš„é•œåƒï¼</p>
<p>å®˜æ–¹æ—¢ç„¶å¯ä»¥åˆ¶ä½œé•œåƒï¼Œé‚£æˆ‘ä»¬ä¹Ÿå¯ä»¥ï¼</p>
<h3 id="2-DockerFileæ„å»ºè¿‡ç¨‹"><a href="#2-DockerFileæ„å»ºè¿‡ç¨‹" class="headerlink" title="2.DockerFileæ„å»ºè¿‡ç¨‹"></a>2.DockerFileæ„å»ºè¿‡ç¨‹</h3><p><strong>åŸºç¡€çŸ¥è¯†ï¼š</strong></p>
<p>1ã€æ¯ä¸ªä¿ç•™å…³é”®å­—(æŒ‡ä»¤ï¼‰éƒ½æ˜¯å¿…é¡»æ˜¯å¤§å†™å­—æ¯</p>
<p>2ã€æ‰§è¡Œä»ä¸Šåˆ°ä¸‹é¡ºåº</p>
<p>3ã€#è¡¨ç¤ºæ³¨é‡Š</p>
<p>4ã€æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šåˆ›å»ºæäº¤ä¸€ä¸ªæ–°çš„é•œåƒæ›¾ï¼Œå¹¶æäº¤ï¼</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/1625523270,2105451565.jpg" srcset="/img/loading.gif" alt=""></p>
<p>Dockerfileæ˜¯é¢å‘å¼€å‘çš„ï¼Œæˆ‘ä»¬ä»¥åè¦å‘å¸ƒé¡¹ç›®ï¼Œåšé•œåƒï¼Œå°±éœ€è¦ç¼–å†™dockerfileæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ååˆ†ç®€<br>å•ï¼</p>
<p>Dockeré•œåƒé€æ¸æˆä¼ä¸šäº¤ä»˜çš„æ ‡å‡†ï¼Œå¿…é¡»è¦æŒæ¡ï¼</p>
<p>(ä¹‹å‰æ˜¯jar waråŒ…)</p>
<p><strong>æ­¥éª¤ï¼šå¼€å‘ï¼Œéƒ¨ç½²ï¼Œè¿ç»´ã€‚ç¼ºä¸€ä¸å¯ï¼</strong></p>
<ul>
<li><p>DockerFileï¼šæ„å»ºæ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€åˆ‡çš„æ­¥éª¤ï¼Œæºä»£ç </p>
</li>
<li><p>DockerImagesï¼šé€šè¿‡DockerFileæ„å»ºç”Ÿæˆçš„é•œåƒï¼Œæœ€ç»ˆå‘å¸ƒå’Œè¿è¡Œäº§å“ã€‚</p>
</li>
<li><p>Dockerå®¹å™¨ï¼šå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œèµ·æ¥æä¾›æœåŠ¡ã€‚</p>
</li>
</ul>
<h3 id="3-DockerFileå¸¸ç”¨æŒ‡ä»¤"><a href="#3-DockerFileå¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="3.DockerFileå¸¸ç”¨æŒ‡ä»¤"></a>3.DockerFileå¸¸ç”¨æŒ‡ä»¤</h3><p>ä»¥å‰çš„è¯æ˜¯ä½¿ç”¨åˆ«äººçš„ï¼Œï¼Œç°åœ¨æˆ‘ä»¬è¦è‡ªå·±åšä¸€ä¸ªã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/3865597739,462198828.jpg" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell">FROM # åŸºç¡€é•œåƒï¼Œä¸€åˆ‡ä»è¿™é‡Œå¼€å§‹æ„å»º
MAINTAINER # é•œåƒæ˜¯è°å†™çš„ï¼Œ å§“å+é‚®ç®±
RUN # é•œåƒæ„å»ºçš„æ—¶å€™éœ€è¦è¿è¡Œçš„å‘½ä»¤
ADD # æ­¥éª¤ï¼Œtomcaté•œåƒï¼Œè¿™ä¸ªtomcatå‹ç¼©åŒ…ï¼æ·»åŠ å†…å®¹ æ·»åŠ åŒç›®å½•
WORKDIR # é•œåƒçš„å·¥ä½œç›®å½•
VOLUME # æŒ‚è½½çš„ç›®å½•
EXPOSE # ä¿ç•™ç«¯å£é…ç½®
CMD # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£ã€‚
ENTRYPOINT # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤
ONBUILD # å½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿ DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡Œ ONBUILD çš„æŒ‡ä»¤ï¼Œè§¦å‘æŒ‡
ä»¤ã€‚
COPY # ç±»ä¼¼ ADD ï¼Œå°†æˆ‘ä»¬æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­
ENV # æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡ï¼</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/911490-20171208222222062-849020400.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="4-å®æˆ˜æµ‹è¯•"><a href="#4-å®æˆ˜æµ‹è¯•" class="headerlink" title="4.å®æˆ˜æµ‹è¯•"></a>4.å®æˆ˜æµ‹è¯•</h3><p>Docker Hub ä¸­çš„99%é•œåƒéƒ½æ˜¯ä»FROM scratch è¿™ä¸ªåŸºç¡€é•œåƒå¼€å§‹çš„ï¼Œç„¶åé…ç½®ç›¸åº”çš„è½¯ä»¶å’Œé…ç½®æ¥æ„å»ºçš„ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119203852.png" srcset="/img/loading.gif" alt=""></p>
<blockquote>
<p>åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„centos</p>
</blockquote>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 1.ç¼–å†™Dockerfileæ–‡ä»¶</span>
pi@raspbian:~/docker-test$ cat dockerfile02
FROM centos
MAINTAINER baixf&lt;707401057@qq.com&gt;

ENV MYPATH /usr/local
WORKDIR MYPATH

RUN yum install vim
RUN yun install net-tools

EXPOSE 80

CMD echo MYPATH
CMD echo &quot;----end----&quot;
CMD /bin/bash</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 2ã€é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ„å»ºé•œåƒ</span>
<span class="hljs-meta">#</span><span class="bash"> å‘½ä»¤ docker build -f æ–‡ä»¶è·¯å¾„ -t é•œåƒå:[tag] .</span>
pi@raspbian:~/docker-test$ docker build -f dockerfile02 -t mycentos:1.0 .

Successfully built 031644e6e6f2
Successfully tagged mycentos:1.0</code></pre>
<p><strong>æµ‹è¯•è¿è¡Œ</strong></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119205649.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> docker <span class="hljs-built_in">history</span> é•œåƒid  æŸ¥çœ‹é•œåƒæ“ä½œå†å²è®°å½•</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119205839.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>æŸ¥çœ‹å®˜æ–¹å…¶ä»–é•œåƒåˆ¶ä½œ dockerfile </strong></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> mysql</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119210335.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> tomcat</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119210521.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/entrypoint.jpg" srcset="/img/loading.gif" alt=""></p>
<p><strong>CMD å’Œ ENTRYPOINT çš„åŒºåˆ«</strong></p>
<pre><code class="hljs shell">CMD # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿
ä»£ã€‚
ENTRYPOINT # æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> CMDæµ‹è¯•</span>
<span class="hljs-meta">#</span><span class="bash"> dockerfile03</span>
FROM centos
CMD [&quot;ls&quot;,&quot;-a&quot;]

<span class="hljs-meta">#</span><span class="bash"> build</span>
docker build -f dockerfile03 -t cmdtest .

<span class="hljs-meta">#</span><span class="bash">runã€æ­£å¸¸ğŸ‘ã€‘</span>
pi@raspbian:~/docker-test$ docker run cmdtest
.
..
.dockerenv
bin
dev
etc
home
lib
lib64
lost+found
media
mnt
opt
proc
root
run
sbin
srv
sys
tmp
usr
var

<span class="hljs-meta">#</span><span class="bash"> è¿½åŠ å‘½ä»¤ã€ERRORâŒã€‘</span>
pi@raspbian:~/docker-test$ docker run cmdtest -l
docker: Error response from daemon: OCI runtime create failed: container_linux.go:370: starting container process caused: exec: &quot;-l&quot;: executable file not found in $PATH: unknown.
ERRO[0001] error waiting for container: context canceled</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> ENTRYPOINT æµ‹è¯•</span>
<span class="hljs-meta">#</span><span class="bash"> dockerfile04</span>
FROM centos
ENTRYPOINT [&quot;ls&quot;,&quot;-a&quot;]

<span class="hljs-meta">#</span><span class="bash">build</span>
docker build -f dockerfile04 -t entrypointtest .


<span class="hljs-meta">#</span><span class="bash"> è¿½åŠ æ‰§è¡Œã€æ­£å¸¸ã€‘ğŸ‘</span>

pi@raspbian:~/docker-test$ docker run entrypointtest -l 
total 56
drwxr-xr-x   1 root root 4096 Jan 19 13:20 .
drwxr-xr-x   1 root root 4096 Jan 19 13:20 ..
-rwxr-xr-x   1 root root    0 Jan 19 13:20 .dockerenv
lrwxrwxrwx   1 root root    7 Nov  3 15:23 bin -&gt; usr/bin
drwxr-xr-x   5 root root  320 Jan 19 13:20 dev
drwxr-xr-x   1 root root 4096 Jan 19 13:20 etc
drwxr-xr-x   2 root root 4096 Nov  3 15:23 home
lrwxrwxrwx   1 root root    7 Nov  3 15:23 lib -&gt; usr/lib
lrwxrwxrwx   1 root root    9 Nov  3 15:23 lib64 -&gt; usr/lib64
drwx------   2 root root 4096 Dec  4 17:44 lost+found
drwxr-xr-x   2 root root 4096 Nov  3 15:23 media
drwxr-xr-x   2 root root 4096 Nov  3 15:23 mnt
drwxr-xr-x   2 root root 4096 Nov  3 15:23 opt
dr-xr-xr-x 230 root root    0 Jan 19 13:20 proc
dr-xr-x---   2 root root 4096 Dec  4 17:45 root
drwxr-xr-x  11 root root 4096 Dec  4 17:45 run
lrwxrwxrwx   1 root root    8 Nov  3 15:23 sbin -&gt; usr/sbin
drwxr-xr-x   2 root root 4096 Nov  3 15:23 srv
dr-xr-xr-x  12 root root    0 Jan 19 13:20 sys
drwxrwxrwt   7 root root 4096 Dec  4 17:45 tmp
drwxr-xr-x  12 root root 4096 Dec  4 17:44 usr
drwxr-xr-x  20 root root 4096 Dec  4 17:45 var</code></pre>
<p>Dockerfileä¸­å¾ˆå¤šå‘½ä»¤éƒ½ååˆ†çš„ç›¸ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å®ƒä»¬çš„åŒºåˆ«ï¼Œæˆ‘ä»¬æœ€å¥½çš„å­¦ä¹ å°±æ˜¯å¯¹æ¯”ä»–ä»¬ç„¶åæµ‹<br>è¯•æ•ˆæœï¼</p>
<h3 id="5-å®æˆ˜ï¼šTomcaté•œåƒ"><a href="#5-å®æˆ˜ï¼šTomcaté•œåƒ" class="headerlink" title="5.å®æˆ˜ï¼šTomcaté•œåƒ"></a>5.å®æˆ˜ï¼šTomcaté•œåƒ</h3><p>1.å‡†å¤‡é•œåƒæ–‡ä»¶  tomcat  å’Œ  jdk çš„å‹ç¼©åŒ…ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119213840.png" srcset="/img/loading.gif" alt=""></p>
<p>2.ç¼–å†™ Dokerfile æ–‡ä»¶ã€‚</p>
<pre><code class="hljs shell">FROM centos #
MAINTAINER baixf&lt;707401057@qq.com&gt;

COPY README /usr/local/README #å¤åˆ¶æ–‡ä»¶

ADD jdk-8u231-linux-x64.tar.gz /usr/local/ #å¤åˆ¶è§£å‹,addä¼šè‡ªåŠ¨è§£å‹
ADD apache-tomcat-9.0.22.tar.gz /usr/local/ #å¤åˆ¶è§£å‹ï¼Œaddä¼šè‡ªåŠ¨è§£å‹

RUN yum -y install vim

ENV MYPATH /usr/local #è®¾ç½®ç¯å¢ƒå˜é‡
WORKDIR $MYPATH #è®¾ç½®å·¥ä½œç›®å½•

ENV JAVA_HOME /usr/local/jdk1.8.0_11
ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
ENV CATALINA_HOME /usr/local/apache-tomcat-9.0.22
ENV CATALINA_BASH /usr/local/apache-tomcat-9.0.22
ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HONE/bin

EXPOSE 8080 #è®¾ç½®æš´éœ²çš„ç«¯å£

CMD /usr/local/apache-tomcat-9.0.22/bin/startup.sh &amp;&amp; tail -F /usr/local/apachetomcat-9.0.22/logs/catalina.out # è®¾ç½®é»˜è®¤å‘½ä»¤</code></pre>
<p>3ã€æ„å»ºé•œåƒ</p>
<pre><code class="hljs shell">docker build -t diytomcat:0.1 .</code></pre>
<p>4ã€runé•œåƒ</p>
<pre><code class="hljs shell">docker run -d -p 8080:8080 --name tomcat01 -v /home/kuangshen/build/tomcat/test:/usr/local/apache-tomcat-9.0.35/webapps/test -v /home/kuangshen/build/tomcat/tomcatlogs/:/usr/local/apache-tomcat-9.0.35/logs
mytomcat:0.1</code></pre>
<p>5ã€è®¿é—®æµ‹è¯•</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">å®¿ä¸»æœºï¼šcurl localhost:9090</span></code></pre>
<p>6ã€å‘å¸ƒé¡¹ç›®(ç”±äºåšäº†å·æŒ‚è½½ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æœ¬åœ°ç¼–å†™é¡¹ç›®å°±å¯ä»¥å‘å¸ƒäº†ï¼)</p>
<p>å‘ç°ï¼šé¡¹ç›®éƒ¨ç½²æˆåŠŸï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼</p>
<p>æˆ‘ä»¬ä»¥åå¼€å‘çš„æ­¥éª¤ï¼šéœ€è¦æŒæ¡Dockerfileçš„ç¼–å†™ï¼æˆ‘ä»¬ä¹‹åçš„ä¸€åˆ‡éƒ½æ˜¯ä½¿ç”¨dockeré•œåƒæ¥å‘å¸ƒè¿è¡Œï¼</p>
<h3 id="6-å‘å¸ƒè‡ªå·±çš„é•œåƒ"><a href="#6-å‘å¸ƒè‡ªå·±çš„é•œåƒ" class="headerlink" title="6.å‘å¸ƒè‡ªå·±çš„é•œåƒ"></a>6.å‘å¸ƒè‡ªå·±çš„é•œåƒ</h3><ul>
<li><p>Dockerhub</p>
<p>1.æ³¨å†Œè´¦å·<br>2.ç¡®å®šè¿™ä¸ªè´¦å·å¯ä»¥ç™»å½•<br>3.ç™»å½•</p>
</li>
</ul>
<pre><code class="hljs shell">pi@raspbian:~/docker-test$ docker login --help

Usage:  docker login [OPTIONS] [SERVER]

Log in to a Docker registry.
If no server is specified, the default is defined by the daemon.

Options:
  -p, --password string   Password
      --password-stdin    Take the password from stdin
  -u, --username string   Username</code></pre>
<pre><code class="hljs shell">pi@raspbian:~/docker-test$ docker login -u baixfxyz
Password: 
WARNING! Your password will be stored unencrypted in /home/pi/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded

pi@raspbian:~/docker-test$ docker logout
Removing login credentials for https://index.docker.io/v1/</code></pre>
<p>  4.ç™»é™†å³å¯ï¼Œæäº¤ push é•œåƒ</p>
<pre><code class="hljs shell">pi@raspbian:~/docker-test$ docker push mycentos:1.0
The push refers to repository [docker.io/library/mycentos]
b2f7e775e8e8: Preparing 
16764cdd1bc4: Preparing 
denied: requested access to the resource is denied
<span class="hljs-meta">#</span><span class="bash"> ä¼šå‘ç°pushä¸ä¸Šå»ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰å‰ç¼€çš„è¯é»˜è®¤æ˜¯pushåˆ° å®˜æ–¹çš„library</span>

<span class="hljs-meta">#</span><span class="bash"> è§£å†³æ–¹æ³•</span>
<span class="hljs-meta">#</span><span class="bash"> ç¬¬ä¸€ç§ buildçš„æ—¶å€™æ·»åŠ ä½ çš„dockerhubç”¨æˆ·åï¼Œç„¶ååœ¨pushå°±å¯ä»¥æ”¾åˆ°è‡ªå·±çš„ä»“åº“äº†</span>
<span class="hljs-meta">$</span><span class="bash"> docker build -t chengcoder/mytomcat:0.1 .</span>
<span class="hljs-meta">#</span><span class="bash"> ç¬¬äºŒç§ ä½¿ç”¨docker tag <span class="hljs-comment">#ç„¶åå†æ¬¡push</span></span>
<span class="hljs-meta">$</span><span class="bash"> docker tag å®¹å™¨id chengcoder/mytomcat:1.0 </span>
<span class="hljs-meta">#</span><span class="bash">ç„¶åå†æ¬¡push</span>
çœ‹å®˜ç½‘ å¾ˆè¯¦ç»†https://cr.console.aliyun.com/repository/</code></pre>
<ul>
<li>é˜¿é‡Œäº‘é•œåƒæœåŠ¡ä¸Š</li>
</ul>
<blockquote>
<p>çœ‹å®˜ç½‘ å¾ˆè¯¦ç»†<a target="_blank" rel="noopener" href="https://cr.console.aliyun.com/repository/">https://cr.console.aliyun.com/repository/</a></p>
</blockquote>
<p>1.ç™»å½•é˜¿é‡Œäº‘</p>
<p>2.æ‰¾åˆ°å®¹å™¨é•œåƒæœåŠ¡</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119222602.png" srcset="/img/loading.gif" alt=""></p>
<p>3.åˆ›å»ºå‘½åç©ºé—´</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210119222635.png" srcset="/img/loading.gif" alt=""></p>
<p>4.åˆ›å»ºå®¹å™¨é•œåƒ</p>
<pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sudo docker login --username=ç™½å°é£23335 registry.cn-beijing.aliyuncs.com</span>
<span class="hljs-meta">$</span><span class="bash"> sudo docker tag [ImageId] registry.cn-beijing.aliyuncs.com/aliyun-0-docker/baixf-docker:[é•œåƒç‰ˆæœ¬å·]</span>
<span class="hljs-meta">$</span><span class="bash"> sudo docker push registry.cn-beijing.aliyuncs.com/aliyun-0-docker/baixf-docker:[é•œåƒç‰ˆæœ¬å·]</span>
è¯·æ ¹æ®å®é™…é•œåƒä¿¡æ¯æ›¿æ¢ç¤ºä¾‹ä¸­çš„[ImageId]å’Œ[é•œåƒç‰ˆæœ¬å·]å‚æ•°ã€‚</code></pre>
<h3 id="7-å°ç»“"><a href="#7-å°ç»“" class="headerlink" title="7.å°ç»“"></a>7.å°ç»“</h3><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/212601uiw811i4ng6ixdx2.jpg" srcset="/img/loading.gif"  /></p>
<p><strong>æ‹“å±•å‘½ä»¤ï¼š</strong></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å‹ç¼©ğŸ—œ</span>
pi@raspbian:~/docker-test$ docker save --help

Usage:  docker save [OPTIONS] IMAGE [IMAGE...]

Save one or more images to a tar archive (streamed to STDOUT by default)

Options:
  -o, --output string   Write to a file, instead of STDOUT
  
<span class="hljs-meta">#</span><span class="bash"> åŠ è½½</span>
pi@raspbian:~/docker-test$ docker load --help

Usage:  docker load [OPTIONS]

Load an image from a tar archive or STDIN

Options:
  -i, --input string   Read from tar archive file, instead of STDIN
  -q, --quiet          Suppress the load output</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/01190232_02Qb.png" srcset="/img/loading.gif" alt=""></p>
<h2 id="ä¹ã€Docker-ç½‘ç»œ"><a href="#ä¹ã€Docker-ç½‘ç»œ" class="headerlink" title="ä¹ã€Docker ç½‘ç»œ"></a>ä¹ã€Docker ç½‘ç»œ</h2><h3 id="1-ç†è§£Docker-0"><a href="#1-ç†è§£Docker-0" class="headerlink" title="1.ç†è§£Docker 0"></a>1.ç†è§£Docker 0</h3><p><strong>æ¸…ç©ºç¯å¢ƒï¼ï¼</strong></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ¸…ç©ºæ‰€æœ‰ç½‘ç»œ</span>
pi@raspbian:~$ docker rm -f $(docker ps -aq)
5dcf3101615d
edc3cd5cbb9b
3bb8ed02e68c
53b9c300d387
ae2cfd05203b
9fcea1f7cbe0
95287e1750f5
576d355f51c8
782c0b38337d
ef483955a1ee
31ed87fa60d6
ef259865413d
38c0e3bab52f
f89ce3a25e62
b60ee929f32f
96bda453ea8b
54c30f206041
d2f86a05fc73
52a80307a7fc
31df0aa6fb9e
5a1b3e72a2e4
c86f35254ea1
e7c4a115ff36
9cbf742ee266
a535e5ba619c
f4311e01d778
e6b768a79f51
0c96b8cf9bc2
09bcaba4de1f
0eaf062ca9fb
f31980e0ab6a
792d5e8c7575
5d4de87f016f
76bd27490955</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> dockeråˆ é™¤æ‰€æœ‰é•œåƒ</span>

pi@raspbian:~$ docker rmi -f $(docker images -aq)
Untagged: entrypointtest:latest
Deleted: sha256:3459497a6f33985afe63dc36a0f0b794defdb76c3974056c9a5f0d8ca242d112
Untagged: cmdtest:latest
Deleted: sha256:3c53210e3778da8985410fd8b337e36642a77bea744b78be417c0cc8375fc7a1
Untagged: mycentos:1.0
Deleted: sha256:031644e6e6f2aaaa19da04b0f0d16ca5bf6c2cbcb9809240f6dcaa0f69029672
Deleted: sha256:eb0c768082054902771e1f2472339e2165461b465c925e2bded425e664d7e429
Deleted: sha256:c39bd5d9475073b945d822f2cf6a6d4da5354ecda0c6c108d97809a415155188
Deleted: sha256:5bc857eb704af9e2cfabb2168a5b269a7e773fd5b11f28b9a67bf02130bf45eb
Deleted: sha256:4d7f5bac46f9282d268516aa34ac23ee2461a9fb604b859d9ccdc64f14b1d51f
Deleted: sha256:007c7aaad1025cc82b2cf930f4b9dca5fe17f752d43543a785c41461dba3891c
Deleted: sha256:fbd181bb730e6eff3ce209801fbb8eaff247a296229aad2c7be456517472872f
Deleted: sha256:2cf8bf16568fab9497bfe313623e711924ef9d517927eccd0d6abbefb62ab1c0
Untagged: baixf/centos:latest
Deleted: sha256:ddd32d4effdd7d9dd473c4dad875d6e8734b697f00278e69e4fee8a8945e4e63
Deleted: sha256:26d3ed80b9235716a6eadf283de74c16927a9e5d95e21cb5232dbe2edea7ccdf
Deleted: sha256:82319feb9890c866a0264e8f4a2e76546f3b7b73ef66c7ca1cbfd9291bccc812
Untagged: tomcat:66
Deleted: sha256:60e208f14f34aeb7a338d3d238cde22f1cb342dbd83265b71909aea146118d56
Deleted: sha256:78dacba1b96f3738579287e45619f6b266b3ef11239c1d1a9531c0dde9436f32
Untagged: tomcat:1.0
Deleted: sha256:83ac74acd5e011fa39241a5d1c4c43ad65cc9b6a68d5cbbac96db14917e6e000
Deleted: sha256:1329ab2e7df2548e6df50cb7136a5200cb6c57343293a39446f6377849118224
Untagged: redis:latest
Untagged: redis@sha256:0f97c1c9daf5b69b93390ccbe8d3e2971617ec4801fd0882c72bf7cad3a13494
Deleted: sha256:aab98baa141a5336da8748325b8ef41bb387276bc8215b32070f38c27de20733
Deleted: sha256:605d5301258d50af4f8d1f6287fa8d19e298f2b3fa713d54ac0afef873a2c739
Deleted: sha256:b7dba623b62968065543ddd904ef25659953d3a23bb6d27678a311c0dc044e74
Deleted: sha256:ab1ac7683b4e74b5f6a69ab622d30c2db2311191b68c8ff870c47ce965fe916f
Deleted: sha256:fd21bb159809171cae4f0a9f25418f59c9648868d6c3f6dcf6e0d95263d14b17
Deleted: sha256:fe784928e3300261632064b45d268faa2b8cfe0bb046d04524b3314cf3b4ba86
Untagged: tomcat:latest
Untagged: tomcat@sha256:94cc18203335e400dbafcd0633f33c53663b1c1012a13bcad58cced9cd9d1305
Deleted: sha256:688bd6a32df3e2c59d42dee0ea343a962f33308f02226ad1785d6b287ba2f33a
Deleted: sha256:b9fdf641d7fa89de59127b60302297c2c230c826ef3583e1af4ebf446033e99e
Deleted: sha256:98b2e5f6158f9689b6a1e14f1850eb9919525a77d9212058d62c0e70e46d1614
Deleted: sha256:b607261c17e5a3878e2c8f17102c8acd31cc10afe624a5593c2d0d4cffa8dc16
Deleted: sha256:549688c0055d8ccafcea97a203f59d716c30f300d55aa2519095b8925c600209
Deleted: sha256:f4c5a2eb902fc3661085c4101e454509cc20b0f9619ef506e28fe29ebaad3f10
Deleted: sha256:0f3633510041342910c1312156ea5e0f5dc0a250a76c35cd6610632fb4bf6823
Deleted: sha256:7671fe9d1ffb73c4f320db3729569ba104582370ec2f8b0d1e9b8a5738fe6ef3
Deleted: sha256:12f5d1640038ea6b949341ea394e8af61b3a684ec05b5a1e48ffd2050b6e9290
Deleted: sha256:c19a8558650d94114779314f952eb65d2baca80cdc396e3e28d8cae815201c5b
Deleted: sha256:7ce7f234bab77e0253069b93abf52000e714b9fe82ad5e3b47d60bbde097781b
Untagged: nginx:latest
Untagged: nginx@sha256:10b8cc432d56da8b61b070f4c7d2543a9ed17c2b23010b43af434fd40e2ca4aa
Deleted: sha256:9b016c5aa4e8f867e102fac18f0ecaed7b151c798b70354afdb54a24e76462ab
Deleted: sha256:4f68a3976989e90f271414a0b504ed7960b315bd42dad0ae8d8c2d8cf850c266
Deleted: sha256:e119254da86e1a89e11868661c511ffe6ca7a4956bb8c66c9d05d6d6dfcc37cb
Deleted: sha256:c4ca4f3b6bc0bdcc9eecf38c44af52931bd0e73fecd779625b761c07e5b300d4
Deleted: sha256:5e9255d400c476d794a592be75b3eaa460ef233ed96a970d79b46d00b93b1ce2
Deleted: sha256:5c4f3d84264daaff85b2f005a4c295693e48c0e9c3ae76e64a7f3914e94e583b
Untagged: centos:latest
Untagged: centos@sha256:5528e8b1b1719d34604c87e11dcd1c0a20bedf46e83b5632cdeac91b8c04efc1
Deleted: sha256:a0477e85b8aebf57d58bfa74a6598eccfd3fcc43a78c8e29c380cde2e7300a1b
Deleted: sha256:16764cdd1bc476620e90917137529491698856d33294e38e7e11b0444715eb24
Untagged: hello-world:latest
Untagged: hello-world@sha256:31b9c7d48790f0d8c50ab433d9c3b7e17666d6993084c002c2ff1ca09b96391d
Deleted: sha256:a29f45ccde2ac0bde957b1277b1501f471960c8ca49f1588c6c885941640ae60
Deleted: sha256:167d9097a0a0c9ad3c82d85cdd3d078db0410523d29251194ef08288cb785a2a
Error: No such image: eb0c76808205
Error: No such image: c39bd5d94750
Error: No such image: 5bc857eb704a
Error: No such image: 4d7f5bac46f9
Error: No such image: 2cf8bf16568f
Error: No such image: fbd181bb730e
Error: No such image: 26d3ed80b923
Error: No such image: 82319feb9890</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹</span>

pi@raspbian:~$ docker images
REPOSITORY   TAG       IMAGE ID   CREATED   SIZE
pi@raspbian:~$ docker ps -a
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</code></pre>
<ul>
<li>æµ‹è¯•</li>
</ul>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120140150.png" srcset="/img/loading.gif" alt=""></p>
<p>ä¸‰ä¸ªç½‘ç»œ</p>
<pre><code class="hljs shell">é—®é¢˜ï¼š docker æ˜¯å¦‚æœå¤„ç†å®¹å™¨ç½‘ç»œè®¿é—®çš„ï¼Ÿ</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120140610.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æµ‹è¯• è¿è¡Œä¸€ä¸ªtomcat</span>
pi@raspbian:~$ docker run -d -P --name tomcat01 tomcat

<span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹å®¹å™¨å†…ç½‘ç»œåœ°å€ ip addr å‘ç°å®¹å™¨å¯åŠ¨çš„æ—¶å€™ä¼šå¾—åˆ°eth0@çš„ip ipåœ°å€ï¼Œdockeråˆ†é…ï¼</span>
pi@raspbian:~$ docker exec -it tomcat01 ip addr</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120141340.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ€è€ƒï¼šlinuxèƒ½å¦pingé€šè¿™ä¸ªç½‘ç»œ</span></code></pre>
<pre><code class="hljs shell">pi@raspbian:~$ ping 172.17.0.2
PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.
64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.284 ms
64 bytes from 172.17.0.2: icmp_seq=2 ttl=64 time=0.105 ms
64 bytes from 172.17.0.2: icmp_seq=3 ttl=64 time=0.177 ms
64 bytes from 172.17.0.2: icmp_seq=4 ttl=64 time=0.127 ms
64 bytes from 172.17.0.2: icmp_seq=5 ttl=64 time=0.121 ms

<span class="hljs-meta">#</span><span class="bash"> linux å¯ä»¥ ping é€š docker å®¹å™¨å†…éƒ¨</span></code></pre>
<ul>
<li>åŸç†</li>
</ul>
<p>1.æˆ‘ä»¬æ¯å¯åŠ¨ä¸€ä¸ªdockerå®¹å™¨ï¼Œdockerå°±ä¼šç»™dockerå®¹å™¨åˆ†é…ä¸€ä¸ªipï¼Œæˆ‘ä»¬åªè¦æŒ‰ç…§äº†dockerï¼Œ<br>å°±ä¼šæœ‰ä¸€ä¸ªdocker0æ¡¥æ¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯veth-pairæŠ€æœ¯ï¼</p>
<p><strong>å†æ¬¡æµ‹è¯• ip addr</strong></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120142638.png" srcset="/img/loading.gif" alt=""></p>
<p>2.åœ¨å¯åŠ¨ä¸€ä¸ªå®¹å™¨æµ‹è¯•ï¼Œå‘ç°åˆå¤šäº†ä¸€å¯¹ç½‘ç»œ</p>
<pre><code class="hljs shell">pi@raspbian:~$ docker run -d -P  --name tomcat02 tomcat
327db62f9f2ada6eca1c8b15419ddeaee534096208d12301a38804d964f69f5d

pi@raspbian:~$ docker exec -it tomcat01 ip addr

pi@raspbian:~$ docker exec -it tomcat02 ip addr</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120144350.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120144249.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell">æˆ‘ä»¬å‘ç°è¿™ä¸ªå®¹å™¨å¸¦æ¥ç½‘å¡ï¼Œéƒ½æ˜¯ä¸€å¯¹å¯¹çš„
veth-pair å°±æ˜¯ä¸€å¯¹çš„è™šæ‹Ÿè®¾å¤‡æ¥å£ï¼Œä»–ä»¬éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œä¸€ç«¯è¿ç€åè®®ï¼Œä¸€ç«¯å½¼æ­¤ç›¸è¿
æ­£å› ä¸ºæœ‰è¿™ä¸ªç‰¹æ€§ veth-pair å……å½“ä¸€ä¸ªæ¡¥æ¢ï¼Œè¿æ¥å„ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡çš„
OpenStac,Dockerå®¹å™¨ä¹‹é—´çš„è¿æ¥ï¼ŒOVSçš„è¿æ¥ï¼Œéƒ½æ˜¯ä½¿ç”¨evth-pairæŠ€æœ¯</code></pre>
<p>3ã€æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹tomcat01å’Œtomcat02æ˜¯å¦å¯ä»¥pingé€š</p>
<pre><code class="hljs shell">pi@raspbian:~$ docker exec -it tomcat01 ping 172.17.0.3

pi@raspbian:~$ docker exec -it tomcat01 ping 172.17.0.2</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120145628.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120150440.png" srcset="/img/loading.gif" alt=""></p>
<p> <strong>ç»“è®º</strong>ï¼štomcat01å’Œtomcat02å…¬ç”¨ä¸€ä¸ªè·¯ç”±å™¨ï¼Œdocker0ã€‚</p>
<p>æ‰€æœ‰çš„å®¹å™¨ä¸æŒ‡å®šç½‘ç»œçš„æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯docker0è·¯ç”±çš„ï¼Œdockerä¼šç»™æˆ‘ä»¬çš„å®¹å™¨åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å¯ç”¨ ipã€‚</p>
<p><strong>æ‹“å±•ï¼šè®¡ç®—æœºç½‘ç»œ</strong></p>
<p>255.255.0.1/16 åŸŸ å±€åŸŸç½‘ï¼</p>
<p>00000000.00000000.00000000.00000000</p>
<p>255.255.0.0 - 255.255.255.255  255*255-2</p>
<p><strong>å°ç»“</strong>ï¼š Dockerä½¿ç”¨çš„æ˜¯Linuxçš„æ¡¥æ¥ï¼Œå®¿ä¸»æœºæ˜¯ä¸€ä¸ªDockerå®¹å™¨çš„ç½‘æ¡¥ docker0</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120151252.png" srcset="/img/loading.gif" alt=""></p>
<p>Dockerä¸­æ‰€æœ‰ç½‘ç»œæ¥å£éƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œè™šæ‹Ÿçš„è½¬å‘æ•ˆç‡é«˜ï¼ˆå†…ç½‘ä¼ é€’æ–‡ä»¶ï¼‰</p>
<p><strong>åªè¦å®¹å™¨åœæ­¢æˆ–è€…åˆ é™¤ï¼Œå¯¹åº”çš„ç½‘æ¡¥ä¸€å¯¹å°±æ²¡äº†ï¼</strong></p>
<pre><code class="hljs shell">pi@raspbian:~$ docker ps
CONTAINER ID   IMAGE     COMMAND             CREATED             STATUS             PORTS                     NAMES
327db62f9f2a   tomcat    &quot;catalina.sh run&quot;   34 minutes ago      Up 34 minutes      0.0.0.0:49154-&gt;8080/tcp   tomcat02
14c6b9b831c4   tomcat    &quot;catalina.sh run&quot;   About an hour ago   Up About an hour   0.0.0.0:49153-&gt;8080/tcp   tomcat01
pi@raspbian:~$ docker stop 327db62f9f2a
327db62f9f2a
pi@raspbian:~$ ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether dc:a6:32:32:3f:f3 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.103/24 brd 192.168.1.255 scope global dynamic noprefixroute eth0
       valid_lft 7037sec preferred_lft 7037sec
    inet6 fe80::8074:3558:bc0f:6a10/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq state UP group default qlen 1000
    link/ether dc:a6:32:32:3f:f5 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.101/24 brd 192.168.1.255 scope global dynamic noprefixroute wlan0
       valid_lft 7083sec preferred_lft 7083sec
    inet6 fe80::b147:6e97:3e61:9203/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
4: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default 
    link/ether 02:42:d1:83:a7:72 brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
       valid_lft forever preferred_lft forever
    inet6 fe80::42:d1ff:fe83:a772/64 scope link 
       valid_lft forever preferred_lft forever
5: docker_gwbridge: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:a8:dd:7b:50 brd ff:ff:ff:ff:ff:ff
    inet 172.18.0.1/16 brd 172.18.255.255 scope global docker_gwbridge
       valid_lft forever preferred_lft forever
7: veth42162a4@if6: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default 
    link/ether 72:e0:76:05:2c:0d brd ff:ff:ff:ff:ff:ff link-netnsid 0
    inet 169.254.138.46/16 brd 169.254.255.255 scope global noprefixroute veth42162a4
       valid_lft forever preferred_lft forever
    inet6 fe80::70e0:76ff:fe05:2c0d/64 scope link 
       valid_lft forever preferred_lft forever</code></pre>
<h3 id="2-â€“-link"><a href="#2-â€“-link" class="headerlink" title="2.â€“-link"></a>2.â€“-link</h3><p><strong>æ€è€ƒä¸€ä¸ªåœºæ™¯ï¼šæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå¾®æœåŠ¡ï¼Œdatabase url=ip: é¡¹ç›®ä¸é‡å¯ï¼Œæ•°æ®ipæ¢äº†ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡åå­—æ¥è¿›è¡Œè®¿é—®å®¹å™¨ï¼Ÿ</strong></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> pingä¸é€š</span>
pi@raspbian:~$ docker exec -it tomcat02 ping tomcat01
ping: tomcat01: Name or service not known


<span class="hljs-meta">#</span><span class="bash"> è¿è¡Œä¸€ä¸ªtomcat03 --link tomcat02</span>
pi@raspbian:~$ docker run -d -P  --name tomcat03 --link tomcat02 tomcat
31110eb8ef9e9202e40c0fdb4c8522ee39cef4df1929fba4390b7e1614db8bfa

<span class="hljs-meta">#</span><span class="bash"> ç”¨tomcat03 ping tomcat02 å¯ä»¥pingé€š</span>
pi@raspbian:~$ docker exec -it tomcat03 ping tomcat02
PING tomcat02 (172.17.0.3) 56(84) bytes of data.
64 bytes from tomcat02 (172.17.0.3): icmp_seq=1 ttl=64 time=0.630 ms
64 bytes from tomcat02 (172.17.0.3): icmp_seq=2 ttl=64 time=0.167 ms
64 bytes from tomcat02 (172.17.0.3): icmp_seq=3 ttl=64 time=0.142 ms


<span class="hljs-meta">#</span><span class="bash"> ç”¨tomcat02 ping tomcat03 pingä¸é€š</span>
pi@raspbian:~$ docker exec -it tomcat02 ping tomcat03
ping: tomcat03: Name or service not known</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120154117.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹docker network --<span class="hljs-built_in">help</span></span>
pi@raspbian:~$ docker network --help

Usage:  docker network COMMAND

Manage networks

Commands:
  connect     Connect a container to a network
  create      Create a network
  disconnect  Disconnect a container from a network
  inspect     Display detailed information on one or more networks
  ls          List networks
  prune       Remove all unused networks
  rm          Remove one or more networks

Run &#x27;docker network COMMAND --help&#x27; for more information on a command.</code></pre>
<pre><code class="hljs shell">pi@raspbian:~$ docker network ls
NETWORK ID     NAME              DRIVER    SCOPE
421f2c2a5ec7   bridge            bridge    local
eb4bd4907eff   docker_gwbridge   bridge    local
06a3c9e409f6   host              host      local
e129f1c57a68   none              null      local</code></pre>
<p><strong>æ¢ç©¶ï¼š docker network inspect ç½‘ç»œid ç½‘æ®µç›¸åŒ</strong></p>
<pre><code class="hljs shell">docker inspect 421f2c2a5ec7</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120154204.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell">docker inspect tomcat03</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120155437.png" srcset="/img/loading.gif" alt=""></p>
<p>æŸ¥çœ‹tomcat03é‡Œé¢çš„/etc/hostså‘ç°æœ‰tomcat02çš„é…ç½®</p>
<pre><code class="hljs shell">docker exec tomcat03 cat /etc/hosts</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120155700.png" srcset="/img/loading.gif" alt=""></p>
<p>æœ¬è´¨æ¢ç©¶ï¼šâ€“-link æœ¬è´¨å°±æ˜¯åœ¨hostsé…ç½®ä¸­æ·»åŠ æ˜ å°„ </p>
<p>ç°åœ¨ä½¿ç”¨ Docker å·²ç»ä¸å»ºè®®ä½¿ç”¨ â€“link äº†ï¼ </p>
<p>è‡ªå®šä¹‰ç½‘ç»œï¼Œä¸é€‚ç”¨ docker0ï¼ </p>
<p>docker0 é—®é¢˜ï¼šä¸æ”¯æŒå®¹å™¨åè¿æ¥è®¿é—®ï¼</p>
<h3 id="3-è‡ªå®šä¹‰ç½‘ç»œ"><a href="#3-è‡ªå®šä¹‰ç½‘ç»œ" class="headerlink" title="3.è‡ªå®šä¹‰ç½‘ç»œ"></a>3.è‡ªå®šä¹‰ç½‘ç»œ</h3><ul>
<li>æŸ¥çœ‹æ‰€æœ‰çš„dockerç½‘ç»œ</li>
</ul>
<pre><code class="hljs shell">pi@raspbian:~$ docker network ls
NETWORK ID     NAME              DRIVER    SCOPE
421f2c2a5ec7   bridge            bridge    local
eb4bd4907eff   docker_gwbridge   bridge    local
06a3c9e409f6   host              host      local
e129f1c57a68   none              null      local</code></pre>
<p><strong>ç½‘ç»œæ¨¡å¼</strong> </p>
<p>bridge ï¼šæ¡¥æ¥ dockerï¼ˆé»˜è®¤ï¼Œè‡ªå·±åˆ›å»ºä¹Ÿæ˜¯ç”¨bridgeæ¨¡å¼ï¼‰ </p>
<p>none ï¼šä¸é…ç½®ç½‘ç»œï¼Œä¸€èˆ¬ä¸ç”¨ </p>
<p>host ï¼šå’Œå®¿ä¸»ä¸»æœºå…±äº«ç½‘ç»œ </p>
<p>container ï¼šå®¹å™¨ç½‘ç»œè¿é€šï¼ˆç”¨å¾—å°‘ï¼å±€é™å¾ˆå¤§ï¼‰</p>
<p><strong>æµ‹è¯•</strong></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æˆ‘ä»¬ç›´æ¥å¯åŠ¨çš„å‘½ä»¤ --net bridge,è€Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬å¾—docker0</span>
<span class="hljs-meta">#</span><span class="bash"> bridgeå°±æ˜¯docker0</span>
<span class="hljs-meta">$</span><span class="bash"> docker run -d -P --name tomcat01 tomcat</span>
ç­‰ä»·äº =&gt; docker run -d -P --name tomcat01 --net bridge tomcat

<span class="hljs-meta">#</span><span class="bash"> docker0ï¼Œç‰¹ç‚¹ï¼šé»˜è®¤ï¼ŒåŸŸåä¸èƒ½è®¿é—®ã€‚ --linkå¯ä»¥æ‰“é€šè¿æ¥ï¼Œä½†æ˜¯å¾ˆéº»çƒ¦ï¼</span>

<span class="hljs-meta">#</span><span class="bash"> æˆ‘ä»¬å¯ä»¥ è‡ªå®šä¹‰ä¸€ä¸ªç½‘ç»œ</span>
<span class="hljs-meta">#</span><span class="bash"> --driver bridge</span>
<span class="hljs-meta">#</span><span class="bash"> --subnet 192.168.0.0/16</span>
<span class="hljs-meta">#</span><span class="bash"> --gateway 192.168.0.1</span>
<span class="hljs-meta">$</span><span class="bash"> docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet</span>

pi@raspbian:~$ docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet
3a84276ed04cc6fd1cc499a9b63b7d4957b83a599a7d65e8bd483cad5cd4200b

pi@raspbian:~$ docker network ls
NETWORK ID     NAME              DRIVER    SCOPE
421f2c2a5ec7   bridge            bridge    local
eb4bd4907eff   docker_gwbridge   bridge    local
06a3c9e409f6   host              host      local
3a84276ed04c   mynet             bridge    local
e129f1c57a68   none              null      local</code></pre>
<p>æˆ‘ä»¬è‡ªå·±çš„ç½‘ç»œå°±åˆ›å»ºå¥½äº†ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120161453.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell">pi@raspbian:~$ docker run -d -P --name tomcat-net-01 --net mynet tomcat
b650b67f860b9e1db725b185d018430fa5cd101691933a28d6791937bc7112eb
pi@raspbian:~$ docker run -d -P --name tomcat-net-02 --net mynet tomcat
8fc5140b4d55da708a13f8777f3fe18a9c627c1ed3c72f6b55134b4113f02e08
pi@raspbian:~$ docker inspect mynet
[
    &#123;
        &quot;Name&quot;: &quot;mynet&quot;,
        &quot;Id&quot;: &quot;3a84276ed04cc6fd1cc499a9b63b7d4957b83a599a7d65e8bd483cad5cd4200b&quot;,
        &quot;Created&quot;: &quot;2021-01-20T16:11:39.555402615+08:00&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: &#123;
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: &#123;&#125;,
            &quot;Config&quot;: [
                &#123;
                    &quot;Subnet&quot;: &quot;192.168.0.0/16&quot;,
                    &quot;Gateway&quot;: &quot;192.168.0.1&quot;
                &#125;
            ]
        &#125;,
        &quot;Internal&quot;: false,
        &quot;Attachable&quot;: false,
        &quot;Ingress&quot;: false,
        &quot;ConfigFrom&quot;: &#123;
            &quot;Network&quot;: &quot;&quot;
        &#125;,
        &quot;ConfigOnly&quot;: false,
        &quot;Containers&quot;: &#123;
            &quot;8fc5140b4d55da708a13f8777f3fe18a9c627c1ed3c72f6b55134b4113f02e08&quot;: &#123;
                &quot;Name&quot;: &quot;tomcat-net-02&quot;,
                &quot;EndpointID&quot;: &quot;9ddc507c5a7c61cc8bfb4309ef99e2bbd512c95711ca24d1f7f56d82aa0ac2ff&quot;,
                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:03&quot;,
                &quot;IPv4Address&quot;: &quot;192.168.0.3/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            &#125;,
            &quot;b650b67f860b9e1db725b185d018430fa5cd101691933a28d6791937bc7112eb&quot;: &#123;
                &quot;Name&quot;: &quot;tomcat-net-01&quot;,
                &quot;EndpointID&quot;: &quot;91231509fd2ff4c96a09cd558b7ef438ff4b1c7d76881417119473a43dee3878&quot;,
                &quot;MacAddress&quot;: &quot;02:42:c0:a8:00:02&quot;,
                &quot;IPv4Address&quot;: &quot;192.168.0.2/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            &#125;
        &#125;,
        &quot;Options&quot;: &#123;&#125;,
        &quot;Labels&quot;: &#123;&#125;
    &#125;
]
</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120161908.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>è‡ªå®šä¹‰ç½‘ç»œå¯ä»¥äº’ç›¸pingé€š</strong></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">åœ¨è‡ªå®šä¹‰çš„ç½‘ç»œä¸‹ï¼ŒæœåŠ¡å¯ä»¥äº’ç›¸pingé€šï¼Œä¸ç”¨ä½¿ç”¨â€“link</span>

pi@raspbian:~$ docker exec -it tomcat-net-01 ping 192.168.0.3
docker exec -it tomcat-net-01 ping tomcat-net-02PING 192.168.0.3 (192.168.0.3) 56(84) bytes of data.
64 bytes from 192.168.0.3: icmp_seq=1 ttl=64 time=0.619 ms
64 bytes from 192.168.0.3: icmp_seq=2 ttl=64 time=0.215 ms
64 bytes from 192.168.0.3: icmp_seq=3 ttl=64 time=0.148 ms
64 bytes from 192.168.0.3: icmp_seq=4 ttl=64 time=0.186 ms

pi@raspbian:~$ docker exec -it tomcat-net-01 ping tomcat-net-02
PING tomcat-net-02 (192.168.0.3) 56(84) bytes of data.
64 bytes from tomcat-net-02.mynet (192.168.0.3): icmp_seq=1 ttl=64 time=0.230 ms
64 bytes from tomcat-net-02.mynet (192.168.0.3): icmp_seq=2 ttl=64 time=0.238 ms
64 bytes from tomcat-net-02.mynet (192.168.0.3): icmp_seq=3 ttl=64 time=0.285 ms
64 bytes from tomcat-net-02.mynet (192.168.0.3): icmp_seq=4 ttl=64 time=0.163 ms
</code></pre>
<p>æˆ‘ä»¬è‡ªå®šä¹‰çš„ç½‘ç»œdockerå½“æˆ‘ä»¬ç»´æŠ¤å¥½äº†å¯¹åº”çš„å…³ç³»ï¼Œæ¨èæˆ‘ä»¬å¹³æ—¶è¿™æ ·ä½¿ç”¨ç½‘ç»œï¼</p>
<p> å¥½å¤„ï¼š</p>
<p> redis -ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯é›†ç¾¤æ˜¯å®‰å…¨å’Œå¥åº·çš„ ã€‚</p>
<p>mysql-ä¸åŒçš„é›†ç¾¤ä½¿ç”¨ä¸åŒçš„ç½‘ç»œï¼Œä¿è¯é›†ç¾¤æ˜¯å®‰å…¨å’Œå¥åº·çš„ã€‚</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120163742.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="4-ç½‘ç»œè¿é€š"><a href="#4-ç½‘ç»œè¿é€š" class="headerlink" title="4.ç½‘ç»œè¿é€š"></a>4.ç½‘ç»œè¿é€š</h3><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120194458.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> åœ¨docker0å¯åŠ¨tomcat01</span>

pi@raspbian:~$ docker ps
CONTAINER ID   IMAGE     COMMAND             CREATED          STATUS          PORTS                     NAMES
8fc5140b4d55   tomcat    &quot;catalina.sh run&quot;   26 minutes ago   Up 26 minutes   0.0.0.0:49158-&gt;8080/tcp   tomcat-net-02
b650b67f860b   tomcat    &quot;catalina.sh run&quot;   26 minutes ago   Up 26 minutes   0.0.0.0:49157-&gt;8080/tcp   tomcat-net-01
pi@raspbian:~$ docker run -d -P --name tomcat01 tomcat
163d7c78f25272bd6f9caed9310cd9ee89f17e6b262a400191f14c62d44e202e
pi@raspbian:~$ docker ps
CONTAINER ID   IMAGE     COMMAND             CREATED          STATUS          PORTS                     NAMES
163d7c78f252   tomcat    &quot;catalina.sh run&quot;   6 seconds ago    Up 4 seconds    0.0.0.0:49159-&gt;8080/tcp   tomcat01
8fc5140b4d55   tomcat    &quot;catalina.sh run&quot;   27 minutes ago   Up 27 minutes   0.0.0.0:49158-&gt;8080/tcp   tomcat-net-02
b650b67f860b   tomcat    &quot;catalina.sh run&quot;   27 minutes ago   Up 27 minutes   0.0.0.0:49157-&gt;8080/tcp   tomcat-net-01</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120164002.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æµ‹è¯•æ‰“é€š tomcat01 - mynet</span>

pi@raspbian:~$ docker network connect mynet tomcat01

<span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹mynet</span>
pi@raspbian:~$ docker network inspect mynet</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120164725.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> è¿é€šä¹‹åå°±æ˜¯å°†tomcat01æ”¾åˆ°äº†mynetç½‘ç»œä¸‹</span>
<span class="hljs-meta">#</span><span class="bash"> ä¸€ä¸ªå®¹å™¨ä¸¤ä¸ªip</span>
<span class="hljs-meta">#</span><span class="bash"> å…¬ç½‘ip ç§ç½‘ip</span></code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æµ‹è¯•tomcat01ä¸tomcat-net-01æ˜¯å¦pingé€š</span>

pi@raspbian:~$ docker exec -it tomcat01 ping tomcat-net-01
PING tomcat-net-01 (192.168.0.2) 56(84) bytes of data.
64 bytes from tomcat-net-01.mynet (192.168.0.2): icmp_seq=1 ttl=64 time=0.414 ms
64 bytes from tomcat-net-01.mynet (192.168.0.2): icmp_seq=2 ttl=64 time=0.225 ms
64 bytes from tomcat-net-01.mynet (192.168.0.2): icmp_seq=3 ttl=64 time=0.305 ms
64 bytes from tomcat-net-01.mynet 
pi@raspbian:~$ docker exec -it tomcat-net-01 ping tomcat-01
ping: tomcat-01: Name or service not known
pi@raspbian:~$ docker exec -it tomcat-net-01 ping tomcat01
PING tomcat01 (192.168.0.4) 56(84) bytes of data.
64 bytes from tomcat01.mynet (192.168.0.4): icmp_seq=1 ttl=64 time=0.251 ms
64 bytes from tomcat01.mynet (192.168.0.4): icmp_seq=2 ttl=64 time=0.381 ms
64 bytes from tomcat01.mynet (192.168.0.4): icmp_seq=3 ttl=64 time=0.157 ms</code></pre>
<p><strong>ç»“è®ºï¼šå‡è®¾è¦è·¨ç½‘ç»œæ“ä½œåˆ«äººï¼Œå°±éœ€è¦ä½¿ç”¨docker network connect è¿é€šï¼</strong></p>
<h3 id="5-å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤"><a href="#5-å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤" class="headerlink" title="5.å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤"></a>5.å®æˆ˜ï¼šéƒ¨ç½²Redisé›†ç¾¤</h3><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120165831.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> åˆ›å»ºç½‘å¡</span>
docker network create redis --subnet 172.38.0.0/16

<span class="hljs-meta">#</span><span class="bash"> é€šè¿‡è„šæœ¬åˆ›å»ºå…­ä¸ªredisé…ç½®</span>
for port in $(seq 1 6);\
do \
sudo mkdir -p /mydata/redis/node-$&#123;port&#125;/conf
sudo touch /mydata/redis/node-$&#123;port&#125;/conf/redis.conf
sudo cat &lt;&lt; EOF &gt;&gt; /mydata/redis/node-$&#123;port&#125;/conf/redis.conf
port 6379
bind 0.0.0.0
cluster-enabled yes
cluster-config-file nodes.conf
cluster-node-timeout 5000
cluster-announce-ip 172.38.0.1$&#123;port&#125;
cluster-announce-port 6379
cluster-announce-bus-port 16379
appendonly yes
EOF
done

<span class="hljs-meta">#</span><span class="bash"> é€šè¿‡è„šæœ¬è¿è¡Œå…­ä¸ªredis</span>
for port in $(seq 1 6);\
do \
docker run -p 637$&#123;port&#125;:6379 -p 1667$&#123;port&#125;:16379 --name redis-$&#123;port&#125; \
-v /mydata/redis/node-$&#123;port&#125;/data:/data \
-v /mydata/redis/node-$&#123;port&#125;/conf/redis.conf:/etc/redis/redis.conf \
-d --net redis --ip 172.38.0.1$&#123;port&#125; redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf
done

<span class="hljs-meta">#</span><span class="bash"> éšä¾¿è¿›å…¥ä¸€ä¸ª</span>
docker exec -it redis-1 /bin/sh 
<span class="hljs-meta">#</span><span class="bash">redisé»˜è®¤æ²¡æœ‰bash</span>

<span class="hljs-meta">#</span><span class="bash"> åˆ›å»ºé›†ç¾¤</span>
redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:6379 172.38.0.16:6379 --cluster-replicas 1</code></pre>
<pre><code class="hljs shell">root@raspbian:/# for port in $(seq 1 6);\
<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-keyword">do</span> \</span>
<span class="hljs-meta">&gt;</span><span class="bash"> sudo mkdir -p /mydata/redis/node-<span class="hljs-variable">$&#123;port&#125;</span>/conf</span>
<span class="hljs-meta">&gt;</span><span class="bash"> sudo touch /mydata/redis/node-<span class="hljs-variable">$&#123;port&#125;</span>/conf/redis.conf</span>
<span class="hljs-meta">&gt;</span><span class="bash"> sudo cat &lt;&lt; <span class="hljs-string">EOF &gt;&gt; /mydata/redis/node-$&#123;port&#125;/conf/redis.conf</span></span>
<span class="hljs-meta">&gt;</span><span class="bash"> port 6379</span>
<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-built_in">bind</span> 0.0.0.0</span>
<span class="hljs-meta">&gt;</span><span class="bash"> cluster-enabled yes</span>
<span class="hljs-meta">&gt;</span><span class="bash"> cluster-config-file nodes.conf</span>
<span class="hljs-meta">&gt;</span><span class="bash"> cluster-node-timeout 5000</span>
<span class="hljs-meta">&gt;</span><span class="bash"> cluster-announce-ip 172.38.0.1<span class="hljs-variable">$&#123;port&#125;</span></span>
<span class="hljs-meta">&gt;</span><span class="bash"> cluster-announce-port 6379</span>
<span class="hljs-meta">&gt;</span><span class="bash"> cluster-announce-bus-port 16379</span>
<span class="hljs-meta">&gt;</span><span class="bash"> appendonly yes</span>
<span class="hljs-meta">&gt;</span><span class="bash"> EOF</span>
<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-keyword">done</span></span>


root@raspbian:/# for port in $(seq 1 6);\
<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-keyword">do</span> \</span>
<span class="hljs-meta">&gt;</span><span class="bash"> docker run -p 637<span class="hljs-variable">$&#123;port&#125;</span>:6379 -p 1667<span class="hljs-variable">$&#123;port&#125;</span>:16379 --name redis-<span class="hljs-variable">$&#123;port&#125;</span> \</span>
<span class="hljs-meta">&gt;</span><span class="bash"> -v /mydata/redis/node-<span class="hljs-variable">$&#123;port&#125;</span>/data:/data \</span>
<span class="hljs-meta">&gt;</span><span class="bash"> -v /mydata/redis/node-<span class="hljs-variable">$&#123;port&#125;</span>/conf/redis.conf:/etc/redis/redis.conf \</span>
<span class="hljs-meta">&gt;</span><span class="bash"> -d --net redis --ip 172.38.0.1<span class="hljs-variable">$&#123;port&#125;</span> redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf</span>
<span class="hljs-meta">&gt;</span><span class="bash"> <span class="hljs-keyword">done</span></span>
66269c755eaee88688ea01efd231b9c57872c230a1bec940124ea9e2aea2c99a
7e8b48f50e8b74e45ed97a134866ba0a30845afe67a493bd2d083232ad17780f
874c17ffc961098ee3902018b1d8bdfb7e7589b227e3eeaced667fa50cc8e2a2
dc14eb2816a645926bc78d8a2a203f5b885574f0c87f87ab04a3f9deab9270db
fe1f79c3536c674fb758229c103a23e306ca6ecee1b736119c59c386f76f29af
1de56ee718ed60fbd71a8af241a36b60cb4f55422838b68ff15315be04154c08


root@raspbian:/# docker exec -it redis-1 /bin/sh
/data # ls
appendonly.aof  nodes.conf
/data # redis-cli --cluster create 172.38.0.11:6379 172.38.0.12:6379 172.38.0.13:6379 172.38.0.14:6379 172.38.0.15:
6379 172.38.0.16:6379 --cluster-replicas 1
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; Performing <span class="hljs-built_in">hash</span> slots allocation on 6 nodes...</span>
Master[0] -&gt; Slots 0 - 5460
Master[1] -&gt; Slots 5461 - 10922
Master[2] -&gt; Slots 10923 - 16383
Adding replica 172.38.0.15:6379 to 172.38.0.11:6379
Adding replica 172.38.0.16:6379 to 172.38.0.12:6379
Adding replica 172.38.0.14:6379 to 172.38.0.13:6379
M: a33d8e303927c7f9d0a3d12137f0174504f0c1a3 172.38.0.11:6379
   slots:[0-5460] (5461 slots) master
M: 81d1c6db29f3e041285968f2e1648eeaa648441c 172.38.0.12:6379
   slots:[5461-10922] (5462 slots) master
M: 67dff49fc0e891df591fac841b07ec62851edf7c 172.38.0.13:6379
   slots:[10923-16383] (5461 slots) master
S: 218238df71f0b8baf0ca4fd47c18a9aabeb4abd4 172.38.0.14:6379
   replicates 67dff49fc0e891df591fac841b07ec62851edf7c
S: b8175dbdf99e75577df2c6c575f6d62f364323aa 172.38.0.15:6379
   replicates a33d8e303927c7f9d0a3d12137f0174504f0c1a3
S: d6fcb4f6de9dc0d9ffb6461624b0a882150028e3 172.38.0.16:6379
   replicates 81d1c6db29f3e041285968f2e1648eeaa648441c
Can I set the above configuration? (type &#x27;yes&#x27; to accept): yes
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; Nodes configuration updated</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; Assign a different config epoch to each node</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; Sending CLUSTER MEET messages to join the cluster</span>
Waiting for the cluster to join
.....
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; Performing Cluster Check (using node 172.38.0.11:6379)</span>
M: a33d8e303927c7f9d0a3d12137f0174504f0c1a3 172.38.0.11:6379
   slots:[0-5460] (5461 slots) master
   1 additional replica(s)
M: 81d1c6db29f3e041285968f2e1648eeaa648441c 172.38.0.12:6379
   slots:[5461-10922] (5462 slots) master
   1 additional replica(s)
S: d6fcb4f6de9dc0d9ffb6461624b0a882150028e3 172.38.0.16:6379
   slots: (0 slots) slave
   replicates 81d1c6db29f3e041285968f2e1648eeaa648441c
S: 218238df71f0b8baf0ca4fd47c18a9aabeb4abd4 172.38.0.14:6379
   slots: (0 slots) slave
   replicates 67dff49fc0e891df591fac841b07ec62851edf7c
M: 67dff49fc0e891df591fac841b07ec62851edf7c 172.38.0.13:6379
   slots:[10923-16383] (5461 slots) master
   1 additional replica(s)
S: b8175dbdf99e75577df2c6c575f6d62f364323aa 172.38.0.15:6379
   slots: (0 slots) slave
   replicates a33d8e303927c7f9d0a3d12137f0174504f0c1a3
[OK] All nodes agree about slots configuration.
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; Check <span class="hljs-keyword">for</span> open slots...</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; Check slots coverage...</span>
[OK] All 16384 slots covered.</code></pre>
<p> dockeræ­å»ºredisé›†ç¾¤å®Œæˆï¼</p>
<p><strong>æ‹“å±•:redisç©ä¸€ç©</strong></p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> è¿›å…¥é›†ç¾¤æ¨¡å¼ -cï¼šé›†ç¾¤ æ— å‚ï¼šå•æœºæ¨¡å¼</span>

/data # redis-cli -c
127.0.0.1:6379&gt; 

<span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯</span>
127.0.0.1:6379&gt; cluster info
cluster_state:ok
cluster_slots_assigned:16384
cluster_slots_ok:16384
cluster_slots_pfail:0
cluster_slots_fail:0
cluster_known_nodes:6
cluster_size:3  # é›†ç¾¤æ•°ç›®
cluster_current_epoch:6
cluster_my_epoch:1
cluster_stats_messages_ping_sent:521
cluster_stats_messages_pong_sent:507
cluster_stats_messages_sent:1028
cluster_stats_messages_ping_received:502
cluster_stats_messages_pong_received:521
cluster_stats_messages_meet_received:5
cluster_stats_messages_received:1028

172.38.0.13:6379&gt; cluster nodes # æŸ¥çœ‹èŠ‚ç‚¹æ•°ç›®
d6fcb4f6de9dc0d9ffb6461624b0a882150028e3 172.38.0.16:6379@16379 slave 81d1c6db29f3e041285968f2e1648eeaa648441c 0 1611137999000 6 connected
81d1c6db29f3e041285968f2e1648eeaa648441c 172.38.0.12:6379@16379 master - 0 1611137999000 2 connected 5461-10922
218238df71f0b8baf0ca4fd47c18a9aabeb4abd4 172.38.0.14:6379@16379 slave 67dff49fc0e891df591fac841b07ec62851edf7c 0 1611137998000 4 connected
67dff49fc0e891df591fac841b07ec62851edf7c 172.38.0.13:6379@16379 myself,master - 0 1611137998000 3 connected 10923-16383
a33d8e303927c7f9d0a3d12137f0174504f0c1a3 172.38.0.11:6379@16379 master - 0 1611138000096 1 connected 0-5460
b8175dbdf99e75577df2c6c575f6d62f364323aa 172.38.0.15:6379@16379 slave a33d8e303927c7f9d0a3d12137f0174504f0c1a3 0 1611137999092 5 connected

<span class="hljs-meta">#</span><span class="bash"> slaveæ˜¯ä»èŠ‚ç‚¹ masteræ˜¯ä¸»èŠ‚ç‚¹</span>

127.0.0.1:6379&gt; set a b
<span class="hljs-meta">-&gt;</span><span class="bash"> Redirected to slot [15495] located at 172.38.0.13:6379  <span class="hljs-comment"># å½“å‰å¤„ç†çš„æ•°æ®å­˜åœ¨äº†èŠ‚ç‚¹ä¸º13.6379 masterèŠ‚ç‚¹</span></span>
OK

<span class="hljs-meta">#</span><span class="bash"> é€‰ä¸¾æœºåˆ¶</span>
<span class="hljs-meta">#</span><span class="bash"> é«˜å¯ç”¨æœºåˆ¶ä½“ç°ğŸ‘‡</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120182702.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210120182649.png" srcset="/img/loading.gif" alt=""></p>
<p><strong> æˆ‘ä»¬ä½¿ç”¨dockerä¹‹åï¼Œæ‰€æœ‰çš„æŠ€æœ¯éƒ½ä¼šæ…¢æ…¢å˜å¾—ç®€å•èµ·æ¥ï¼</strong></p>
<h2 id="åã€SpringBootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ"><a href="#åã€SpringBootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ" class="headerlink" title="åã€SpringBootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ"></a>åã€SpringBootå¾®æœåŠ¡æ‰“åŒ…Dockeré•œåƒ</h2><p>1.æ„å»ºSpringBooté¡¹ç›®</p>
<p>2.æ‰“åŒ…è¿è¡Œ </p>
<pre><code class="hljs shell">mvn package</code></pre>
<p>3.ç¼–å†™dockerfile</p>
<pre><code class="hljs shell">FROM java:8

COPY *.jar /app.jar

CMD [&quot;--server.port=8080&quot;]

EXPOSE 8080

ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]</code></pre>
<ol>
<li>æ„å»ºé•œåƒ</li>
</ol>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 1.å¤åˆ¶jarå’ŒDockerfileåˆ°æœåŠ¡å™¨</span>

<span class="hljs-meta">#</span><span class="bash"> 2.æ„å»ºé•œåƒ</span>
docker build -t xxxxx:xx .</code></pre>
<p>5.å‘å¸ƒè¿è¡Œ ä»¥åæˆ‘ä»¬ä½¿ç”¨äº†Dockerä¹‹åï¼Œç»™åˆ«äººäº¤ä»˜å°±æ˜¯ä¸€ä¸ªé•œåƒå³å¯ï¼</p>
<p>ä»¥åæˆ‘ä»¬ä½¿ç”¨äº†Dockerä¹‹åï¼Œç»™åˆ«äººäº¤ä»˜å°±æ˜¯ä¸€ä¸ªé•œåƒå³å¯ï¼</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/mmexport1612022824914.jpg" srcset="/img/loading.gif" alt="mmexport1612022824914"></p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1og4y1q7M4?p=1">ç‹‚ç¥è¯´Bç«™è§†é¢‘</a>
<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-tutorial.html">å­¦ä¹ docker</a>
<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://labs.play-with-docker.com/">ä½¿ç”¨docker</a>
<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0/Docker/">Docker</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Docker/">Docker</a>
                    
                      <a class="hover-with-bg" href="/tags/%E7%8B%82%E7%A5%9E/">ç‹‚ç¥</a>
                    
                      <a class="hover-with-bg" href="/tags/nginx/">nginx</a>
                    
                      <a class="hover-with-bg" href="/tags/%E5%AE%B9%E5%99%A8/">å®¹å™¨</a>
                    
                      <a class="hover-with-bg" href="/tags/%E9%95%9C%E5%83%8F/">é•œåƒ</a>
                    
                      <a class="hover-with-bg" href="/tags/tomcat/">tomcat</a>
                    
                      <a class="hover-with-bg" href="/tags/redis/">redis</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/01/25/MySQL/MySQL%E5%AD%A6%E4%B9%A0/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MySQLå­¦ä¹ </span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/01/18/Docker/Docker%E5%85%A5%E9%97%A8/">
                        <span class="hidden-mobile">Dockerå…¥é—¨</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.staticfile.org/valine/1.4.14/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "gn6pMOQ2Y8601y9txmR9s4DN-gzGzoHsz",
          app_key: "KYnH8MyyiQBXK8hMwO7HevEw",
          placeholder: "è¯´ç‚¹ä»€ä¹ˆ",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: false,
          recordIP: false,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> <script src="/js/duration.js"></script> </div> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":200})
    NProgress.start()
    document.addEventListener('DOMContentLoaded', function() {
      window.NProgress && window.NProgress.inc();
    })
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js" ></script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?32cfe221d23ea3ac2ca847f1e865c570";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>



<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
