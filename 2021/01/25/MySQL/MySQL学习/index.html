

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/pi.jpg">
  <link rel="icon" type="image/png" href="/img/pi.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="白小飞">
  <meta name="keywords" content="">
  <title>MySQL学习 - 白小飞のblog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.1.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"blog.baixf.tk","root":"/","version":"1.8.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"copy_btn":true,"image_zoom":{"enable":true},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":true,"baidu":"32cfe221d23ea3ac2ca847f1e865c570","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>白小飞のBlog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/src=http___scibit.com_wp-content_uploads_sites_29_2016_12_mysql.jpg&refer=http___scibit.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="MySQL学习">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-01-25 12:27" pubdate>
        2021年1月25日 中午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      13.2k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      186
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MySQL学习</h1>
            
            <div class="markdown-body">
              <h2 id="MySQL学习笔记（狂神说Java）"><a href="#MySQL学习笔记（狂神说Java）" class="headerlink" title="MySQL学习笔记（狂神说Java）"></a>MySQL学习笔记（狂神说Java）</h2><p>狂神说B站视频：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1NJ411J79W?p=1">https://www.bilibili.com/video/BV1NJ411J79W?p=1</a></p>
<p>MySQL官网：<a target="_blank" rel="noopener" href="https://www.mysql.com/">https://www.mysql.com/</a></p>
<p>MySQL教程：<a target="_blank" rel="noopener" href="https://www.runoob.com/mysql/mysql-tutorial.html">https://www.runoob.com/mysql/mysql-tutorial.html</a></p>
<h2 id="1-初识MySQL"><a href="#1-初识MySQL" class="headerlink" title="1.初识MySQL"></a>1.初识MySQL</h2><p>JavaEE: 企业级java开发 Web</p>
<p>前端（页面：展示，数据！） </p>
<p>后台（连接点：连接数据库 JDBC，连接前端（控制，控制视图跳转，给前端传输数据））</p>
<p>数据库（存数据(变量)，txt，Excel（类似关系型数据库），word）</p>
<blockquote>
<p>只会写代码，学好数据库，基本混饭吃；<br>操作系统，数据结构与算法！当一个不错的程序员！<br>离散数学，数字电路，网站体系结构，编译原理。+实战经验=》优秀的程序员</p>
</blockquote>
<h3 id="1-1-为什么学习数据库"><a href="#1-1-为什么学习数据库" class="headerlink" title="1.1 为什么学习数据库"></a>1.1 为什么学习数据库</h3><p>1.岗位需求</p>
<p>java必须会mysql</p>
<p>2.现在的世界，大数据时代~，数据可以变现，得数据者得天下。</p>
<p>3.被迫需求；存数据</p>
<p>4.数据库是所有软件体系中最核心的存在。DBA</p>
<h3 id="1-2-什么是数据库"><a href="#1-2-什么是数据库" class="headerlink" title="1.2 什么是数据库"></a>1.2 什么是数据库</h3><p>数据库（DB，DateBase）</p>
<p>概念：数据仓库，<strong>软件</strong>，安装在操作系统（windows,linux,mac）之上! SQL,可以存储大量数据，500万！</p>
<p>作用：存储数据，管理数据</p>
<h3 id="1-3-数据库分类"><a href="#1-3-数据库分类" class="headerlink" title="1.3 数据库分类"></a>1.3 数据库分类</h3><p>关系型数据库：SQL<br>（Excel(行列)）</p>
<ul>
<li>Mysql,Oracle,Aql server, DB2,SQLlite</li>
<li>通过表和表之间，行和行之间的关系进行数据的存储， 学员信息表、考勤表……</li>
</ul>
<p>非关系型数据库 NoSQL<br>(key:value)</p>
<ul>
<li>Redis,MongDB</li>
<li>非关系型数据库，对象存储，通过对象自身属性决定。</li>
</ul>
<p>DBMS (DB：数据库 MS：管理系统)</p>
<ul>
<li>数据库管理软件（相当于excel,wps）,科学有效的管理数据，维护和获取数据。</li>
<li>MySQL</li>
</ul>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121182535.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="1-4-MySQL简介"><a href="#1-4-MySQL简介" class="headerlink" title="1.4 MySQL简介"></a>1.4 MySQL简介</h3><p>MySQL是<strong>一个关系型数据库管理系统</strong>，<strong>由瑞典MySQL AB 公司开发</strong>，属于 <strong>Oracle 旗下产品</strong>。MySQL 是<strong>最流行的关系型数据库管理系统</strong>之一，在 WEB 应用方面，MySQL是最好的 <strong>RDBMS (Relational Database Management System，关系数据库管理系统) </strong>应用软件之一。</p>
<p>MySQL是一种关系型数据库管理系统，<strong>关系数据库将数据保存在不同的表中</strong>，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。</p>
<p>MySQL所使用的 <strong>SQL 语言</strong>是用于访问数据库的最常用标准化语言。MySQL 软件采用了双授权政策，分为<strong>社区版和商业版</strong>，由于其<strong>体积小</strong>、<strong>速度快</strong>、总体拥有<strong>成本低</strong>，尤其是<strong>开放源码</strong>这一特点，一般中小型网站包括大型网站（搭建集群）的开发都选择 MySQL 作为网站数据库。</p>
<p><a target="_blank" rel="noopener" href="https://www.mysql.com/">官网</a></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121183806.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="1-5-安装MySQL"><a href="#1-5-安装MySQL" class="headerlink" title="1.5 安装MySQL"></a>1.5 安装MySQL</h3><ul>
<li><p>免安装版：解压就可以用MySQL免安装版的数据存储，默认在当前解压文件夹下。 命令提示符窗口(cmd)启动后，文件目录下对会出现data这个文件就是用于储存数据的。免安装版需要像jdk一样配置环境变量。</p>
</li>
<li><p>安装版：安装就可以用MySQL安装版：MySQL安装版的数据存储，默认在电脑安装目录文件下。不用配置环境变量。</p>
</li>
</ul>
<p>(官网下载地址)[<a target="_blank" rel="noopener" href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a>]</p>
<p>(清华大学开源镜像站)[<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/MySQL-5.7/">https://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/MySQL-5.7/</a>]</p>
<blockquote>
<p>安装建议：1.尽量不要使用exe,注册表，卸载麻烦；2.尽可能使用安装包安装</p>
</blockquote>
<p>安装步骤:</p>
<p>1、下载后得到zip压缩包.</p>
<p>2、解压到自己想要安装到的目录，本人解压到的是D:\mysql</p>
<p>3、添加环境变量：我的电脑-&gt;属性-&gt;高级-&gt;环境变量</p>
<p>选择PATH,在其后面添加: 你的mysql 安装文件下面的bin文件夹</p>
<p>4、编辑 my.ini 文件 ,注意替换路径位置</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 目录一定要换成自己的</span>

[mysqld]
basedir=D:\mysql-5.7.19\
datadir=D:\mysql-5.7.19\data\ #原本无 系统会自动生成 不需要自己建
port=3306 #端口
skip-grant-tables #跳过密码验证</code></pre>
<p>5、启动管理员模式下的CMD，并将路径切换至mysql下的bin目录，然后输入<br><pre><div class="caption"><span>–install``` (安装mysql服务)</span></div><code class="hljs mysqld">
&#96;&#96;&#96;shell
C:\WINDOWS\system32&gt;mysqld -install
Service successfully installed.</code></pre></p>
<p>6、再输入  <code>mysqld --initialize-insecure --user=mysql</code> 初始化数据文件(生成data目录)</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121214901.png" srcset="/img/loading.gif" alt=""></p>
<p>7、然后再次启动mysql </p>
<pre><code class="hljs shell">net start mysql

C:\WINDOWS\system32&gt;net start mysql
MySQL 服务正在启动 .
MySQL 服务已经启动成功。</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121215321.png" srcset="/img/loading.gif" alt=""></p>
<p>8、然后用命令 <code>mysql –u root –p</code> 进入mysql管理界面（密码可为空）</p>
<pre><code class="hljs shell">-u root #用户名是一个叫root的用户
-p #切记：-p之后没有空格

C:\WINDOWS\system32&gt;mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.7.19 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</code></pre>
<p>9、进入界面后更改root密码</p>
<pre><code class="hljs shell">update mysql.user set authentication_string=password(&#x27;123456&#x27;) where user=&#x27;root&#x27; and Host = &#x27;localhost&#x27;;</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">mysql&gt;</span><span class="bash"> update mysql.user <span class="hljs-built_in">set</span> authentication_string=password(<span class="hljs-string">&#x27;123456&#x27;</span>) <span class="hljs-built_in">where</span> user=<span class="hljs-string">&#x27;root&#x27;</span> and Host = <span class="hljs-string">&#x27;localhost&#x27;</span>;</span>
Query OK, 1 row affected, 1 warning (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 1</code></pre>
<p>11、刷新权限</p>
<pre><code class="hljs shell"><span class="hljs-meta">mysql&gt;</span><span class="bash"> flush privileges;</span>
Query OK, 0 rows affected (0.00 sec)</code></pre>
<p>12、修改 my.ini文件删除最后一句skip-grant-tables</p>
<pre><code class="hljs shell">[mysqld]
basedir=D:\mysql-5.7.19\
datadir=D:\mysql-5.7.19\data\
port=3306
<span class="hljs-meta">#</span><span class="bash">skip-grant-tables</span></code></pre>
<p>13、重启mysql即可正常使用</p>
<pre><code class="hljs shell">net stop mysql
net start mysql

C:\WINDOWS\system32&gt;net stop mysql
MySQL 服务正在停止.
MySQL 服务已成功停止。


C:\WINDOWS\system32&gt;net start mysql
MySQL 服务正在启动 .
MySQL 服务已经启动成功。</code></pre>
<p>14、连接上测试出现以下结果就安装好了</p>
<pre><code class="hljs shell">mysql -u root -p
mysql -u root -p123456 #-p后不要空格 此方式只是不安全

C:\WINDOWS\system32&gt;mysql -u root -p
Enter password: ******
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4
Server version: 5.7.19 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.

<span class="hljs-meta">mysql&gt;</span></code></pre>
<pre><code class="hljs shell">sc delete mysql #清空mysql服务⚠ 可用于重装mysql</code></pre>
<h3 id="1-6-SQLyog"><a href="#1-6-SQLyog" class="headerlink" title="1.6 SQLyog"></a>1.6 SQLyog</h3><p>可手动操作,管理MySQL数据库的软件工具</p>
<p>特点 : 简洁 , 易用 , 图形化</p>
<p>数据库信息在/data目录</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121221913.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121222318.png" srcset="/img/loading.gif" alt=""></p>
<p>1.新建一个数据库 school</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 每一个sqlyog的操作都对应一个sql语句</span>

CREATE DATABASE `school`CHARACTER SET utf8 COLLATE utf8_general_ci;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121222724.png" srcset="/img/loading.gif" alt=""></p>
<p>2.新建一张表 student</p>
<pre><code class="hljs shell">字段 id, name, age

<span class="hljs-meta">#</span><span class="bash"> 历史记录</span>

CREATE TABLE `school`.`student` ( `id` INT(10) NOT NULL COMMENT &#x27;学员id&#x27;, `name` VARCHAR(100) NOT NULL COMMENT &#x27;学员name&#x27;, `age` INT(3) NOT NULL COMMENT &#x27;学员age&#x27;, PRIMARY KEY (`id`) ) ENGINE=INNODB CHARSET=utf8 COLLATE=utf8_general_ci;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121224046.png" srcset="/img/loading.gif" alt=""></p>
<p>3.查看表</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 历史记录</span>

SELECT * FROM `school`.`student` LIMIT 0, 1000;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121224442.png" srcset="/img/loading.gif" alt=""></p>
<p>4.添加信息</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 历史记录</span>

INSERT INTO `school`.`student` (`id`, `name`, `age`) VALUES (&#x27;01&#x27;, &#x27;baixf&#x27;, &#x27;18&#x27;);</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121224632.png" srcset="/img/loading.gif" alt=""></p>
<p>5.删除信息</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 历史记录</span>

/*[21-Jan 22:50:44][34 ms]*/ DELETE FROM `school`.`student` WHERE `id` = &#x27;2&#x27;;</code></pre>
<h3 id="1-7连接数据库"><a href="#1-7连接数据库" class="headerlink" title="1.7连接数据库"></a>1.7连接数据库</h3><p>命令行连接！</p>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> mysql -uroot -p123456</span>

C:\Users\Bai&gt;mysql -uroot -p123456

mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 6
Server version: 5.7.19 MySQL Community Server (GPL)

Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> mysql命令模式</span>
<span class="hljs-meta">mysql&gt;</span></code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> 查看更改root密码的命令</span>

update mysql.user set authentication_string=password(&#x27;123456&#x27;) where user=&#x27;root&#x27; and Host = &#x27;localhost&#x27;;

<span class="hljs-meta">#</span><span class="bash"> mysql.user 数据库后的某个表</span>
<span class="hljs-meta">#</span><span class="bash"> <span class="hljs-built_in">set</span> authentication_string=password(<span class="hljs-string">&#x27;123456&#x27;</span>) 设置密码</span></code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210121225852.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs shell"></code></pre>
<pre><code class="hljs shell"><span class="hljs-meta">mysql&gt;</span><span class="bash"> show databases; <span class="hljs-comment">#显示所有数据库</span></span>
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| school             |
| sys                |
+--------------------+
5 rows in set (0.00 sec)

<span class="hljs-meta">mysql&gt;</span><span class="bash"> use school  <span class="hljs-comment"># 使用某个数据库</span></span>
Database changed
<span class="hljs-meta">mysql&gt;</span><span class="bash"> show tables; <span class="hljs-comment"># 显示该数据库下所有表</span></span>
+------------------+
| Tables_in_school |
+------------------+
| student          |
+------------------+
1 row in set (0.00 sec)

<span class="hljs-meta">mysql&gt;</span><span class="bash"> describe student; <span class="hljs-comment"># 查看某个表信息</span></span>
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| id    | int(10)      | NO   | PRI | NULL    |       |
| name  | varchar(100) | NO   |     | NULL    |       |
| age   | int(3)       | NO   |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
<span class="hljs-meta">mysql&gt;</span><span class="bash"> create database baixf; <span class="hljs-comment"># 创建一个数据库</span></span>
Query OK, 1 row affected (0.00 sec)

<span class="hljs-meta">mysql&gt;</span><span class="bash"> show databases;</span>
+--------------------+
| Database           |
+--------------------+
| information_schema |
| baixf              |
| mysql              |
| performance_schema |
| school             |
| sys                |
+--------------------+
6 rows in set (0.00 sec)

<span class="hljs-meta">mysql&gt;</span><span class="bash"> use baixf <span class="hljs-comment"># 使用某个数据库</span></span>
Database changed
<span class="hljs-meta">mysql&gt;</span><span class="bash"> show tables; <span class="hljs-comment"># 新创建的数据库下表为空</span></span>
Empty set (0.00 sec)

<span class="hljs-meta">#</span><span class="bash"> 注释：</span>
<span class="hljs-meta">#</span><span class="bash"> 单行注释 <span class="hljs-comment"># 注释内容</span></span>
<span class="hljs-meta">#</span><span class="bash"> 多行注释 /* 注释内容 */</span>
<span class="hljs-meta">#</span><span class="bash"> 单行注释 -- 注释内容        (标准SQL注释风格，要求双破折号后加一空格符（空格、TAB、换行等）)</span></code></pre>
<h2 id="2-操作数据库"><a href="#2-操作数据库" class="headerlink" title="2.操作数据库"></a>2.操作数据库</h2><blockquote>
<p>操作数据库 - 》 操作数据库中的表 - 》 操作表中的数据</p>
</blockquote>
<ul>
<li>MySQL不区分大小写</li>
</ul>
<h3 id="2-1-操作数据库"><a href="#2-1-操作数据库" class="headerlink" title="2.1 操作数据库"></a>2.1 操作数据库</h3><p>1.创建数据库</p>
<pre><code class="hljs mysql">CREATE DATABASE [IF NOT EXISTS] baixf;</code></pre>
<p>2.删除数据库</p>
<pre><code class="hljs mysql">DROP DATABASE IF EXISTS baixf;</code></pre>
<p>3.使用数据库</p>
<pre><code class="hljs mysql">USE school;

# 如果表名或者字段名中使用了特殊字符，就需要加 &#96;user&#96; 使其不显示高亮
SELECT USER FROM student;

SELECT &#96;USER&#96; FROM student;</code></pre>
<p>4.查看数据库</p>
<pre><code class="hljs mysql">SHOW DATABASES; # 查看所有数据库</code></pre>
<p><strong>学习思路：</strong></p>
<ul>
<li>对照sqlyog可视化查看历史记录</li>
<li>固定语法或关键字必需记住</li>
</ul>
<h3 id="2-2-数据库的列类型"><a href="#2-2-数据库的列类型" class="headerlink" title="2.2 数据库的列类型"></a>2.2 数据库的列类型</h3><blockquote>
<p>数值</p>
</blockquote>
<ul>
<li>tinyint            十分小的数据                    1个字节</li>
<li>smallint          较小的数据                       2个字节</li>
<li>mediumint     中等的数据                      3个字节</li>
<li><strong>int                 标准的整数                         4个字节</strong></li>
<li>igint                较大的数据                        8个字节</li>
<li>float                 浮点数                              4个字节</li>
<li>doule                浮点数                             8个字节</li>
<li>decimal             字符串形式的浮点数     金融常用</li>
</ul>
<blockquote>
<p>字符串</p>
</blockquote>
<ul>
<li>char                 字符串固定大小 0-255</li>
<li><strong>varchar          可变字符串 0-65535</strong></li>
<li>tingtext            微型文本 1-2^8-1</li>
<li><strong>text                  文本串</strong></li>
</ul>
<blockquote>
<p>时间日期</p>
</blockquote>
<ul>
<li>date            YYYY-MM-DD       日期格式</li>
<li>time             HH:MM:SS           时间格式</li>
<li><strong>datetime      YYYY-MM-DD  HH:MM:SS </strong>   最常用时间格式</li>
<li>timestamp     时间戳   1970.1.1到现在的毫秒数</li>
<li>year                 年</li>
</ul>
<blockquote>
<p>null</p>
</blockquote>
<ul>
<li>没有值，未知</li>
<li><strong>注意，不要使用NULL进行计算</strong></li>
</ul>
<h3 id="2-3-数据库的字段属性"><a href="#2-3-数据库的字段属性" class="headerlink" title="2.3 数据库的字段属性"></a>2.3 数据库的字段属性</h3><p><strong>Unsigned</strong></p>
<ul>
<li>无符号的整数</li>
<li>声明了该列不能为负数</li>
</ul>
<p><strong>zerofill</strong></p>
<ul>
<li>0填充的</li>
<li>不足的位数，使用0来填充</li>
</ul>
<p><strong>自增</strong></p>
<ul>
<li><p>通常理解为自增，自动在上一条记录基础上+1（默认）</p>
</li>
<li><p>通常用来设置唯一主键—— index,必须是整数类型</p>
</li>
<li><p>可以自定义设计主键的递增的起始和步长</p>
</li>
</ul>
<p><strong>非空 NULL NOT NULL</strong></p>
<ul>
<li>假设设置为not null ，如果不给它赋值，就会报错!</li>
<li>NUII，如果不填写值，默认就是null !</li>
</ul>
<p><strong>默认</strong></p>
<ul>
<li>设置默认的值！</li>
<li>sex,默认为男，如果不设置则为默认值。</li>
</ul>
<p><strong>拓展：</strong></p>
<pre><code class="hljs sql">*/
每一个表，都必须存在以下五个字段!未来做项目用的，表示一个记录存在意义!
id 主键
&#x27;version` 乐观锁
is_delete 伪删除
gmt_create 创建时间
gmt_update 修改时间
*/</code></pre>
<h3 id="2-4-创建数据库表"><a href="#2-4-创建数据库表" class="headerlink" title="2.4 创建数据库表"></a>2.4 创建数据库表</h3><pre><code class="hljs mysql">--目标︰创建一个schoo1数据库
--创建学生表(列,字段)使用mysql创建

--注意点:使用英文，表的名称和字段尽量使用&#96;&#96;括起来
-- AUTO_INCREMENT 自增
--字符串使用单引号括起来!
--所有的语句后面加,
--最后一个不用加-- PRIMARY KEY主键，一般一个表只有一个唯一的主键!
            
CREATE TABLE IF NOT EXISTS student(
&#96;id&#96; INT(4) NOT NULL AUTO_INCREMENT COMMENT &#39;学号&#39;,
&#96;pwd&#96; VARCHAR(20) NOT NULL DEFAULT &#39;123456&#39; COMMENT &#39;登陆密码&#39;,
&#96;name&#96; VARCHAR(30) NOT NULL DEFAULT &#39;匿名&#39; COMMENT &#39;姓名&#39;,
&#96;sex&#96; VARCHAR(2) NOT NULL DEFAULT &#39;女&#39; COMMENT &#39;性别&#39;,
&#96;birthday&#96; DATETIME DEFAULT NULL COMMENT &#39;出生日期&#39;,
&#96;address&#96; VARCHAR(100) DEFAULT NULL COMMENT &#39;地址&#39;,
&#96;email&#96; VARCHAR(100) DEFAULT NULL COMMENT &#39;邮箱&#39;,
PRIMARY KEY(&#96;id&#96;)
)ENGINE INNODB CHARSET utf8;</code></pre>
<p><strong>格式</strong></p>
<pre><code class="hljs mysql">CREATE TABLE [IF NOT EXISTS]&#96;表名&#96;(
&#96;字段名&#96; 列类型 [属性] [索引] [注释],
&#96;字段名&#96; 列类型 [属性] [索引] [注释],
......
&#96;字段名&#96; 列类型 [属性] [索引] [注释],
)[表类型][字符集设置][注释]</code></pre>
<p><strong>常用命令</strong></p>
<pre><code class="hljs mysql">SHOW CREATE DATABASE school --查看创建数据库的语句
SHOW CREATETABLE student --查看student数据表的定义语句
DESC student --显示表的结构</code></pre>
<h3 id="2-5-数据表的类型"><a href="#2-5-数据表的类型" class="headerlink" title="2.5 数据表的类型"></a>2.5 数据表的类型</h3><pre><code class="hljs mysql">INNODB #默认使用
MyISAM #早些年使用</code></pre>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>MyISAM</th>
<th>INNODB</th>
</tr>
</thead>
<tbody>
<tr>
<td>事务支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>外键约束</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td>不支持</td>
</tr>
<tr>
<td>表空间大小</td>
<td>较小</td>
<td>较大，约为2倍</td>
</tr>
</tbody>
</table>
</div>
<p>常规使用操作：</p>
<ul>
<li>MyISAM 节约空间，速度较快</li>
<li>INNODB 安全性高，事务的处理，多表多用户操作</li>
</ul>
<blockquote>
<p>在物理空间存在的位置</p>
</blockquote>
<p>所有的数据库文件都存在data目录下,一个目录对应一个数据库</p>
<p>本质还是文件的存储!</p>
<p>MySQL引擎在物理文件上的区别</p>
<ul>
<li><p>INNODB 在数据库表中只有*.frm文件，以及上级目录下的ibdata1文件·MYISAM对应文件。</p>
</li>
<li><p>MySQL引擎在物理文件上的区别</p>
<ul>
<li><p>*.frm表结构的定义文件。</p>
</li>
<li><p>*.MYD数据文件 (data)。</p>
</li>
<li>*.MYI索引文件(index)</li>
</ul>
</li>
</ul>
<blockquote>
<p>设置数据库表的字符集编码</p>
</blockquote>
<pre><code class="hljs mysql">CHARSET&#x3D;utf8</code></pre>
<ul>
<li><p>不设置的话，会是mysql默认的字符集编码~(不支持中文! )</p>
</li>
<li><p>MySQL的默认编码是Latih1，不支持中文</p>
</li>
<li><p>在my.ini 中配置默认的编码</p>
</li>
</ul>
<pre><code class="hljs mysql">character-set-server&#x3D;utf8</code></pre>
<h3 id="2-6-修改和删除表"><a href="#2-6-修改和删除表" class="headerlink" title="2.6 修改和删除表"></a>2.6 修改和删除表</h3><blockquote>
<p>修改</p>
</blockquote>
<pre><code class="hljs mysql">-―修改表名 ALTERTABLE 旧表名 RENAME As 新表名
ALTER TABLE teacher RENAME AS teacherl

--增加表的字段 ALTER TABLE 表名 ADD 字段名 列属性
ALTERTABLE teacher1 ADD age INT (11)

-―修改表的字段(重命名，修改约束!)
--ALTER TALE 表名 MODIFY 字段名 列属性[]
ALTERTABLE teacher1 MODIFY age VARCHAR (11)--修改约束

----ALTER TALE 表名 CHANGE 旧字段名字 新字段名 列属性[]
ALTERTABLE teacher1 CHANGE age age1 INT(1) --字段重名名

# change用来字段重命名，不能修改字段类型和约束;
# modify不用来字段重命名，只能修改字段类型和约束;

--删除表的字段：ALTER TALE 表名 DROP 字段名
ALTER TALE teacher01 DROP 字段名</code></pre>
<blockquote>
<p>删除</p>
</blockquote>
<pre><code class="hljs mysql">--删除表(如果表存在就删除)
DROP TALE IF EXISTS teacher01</code></pre>
<p><strong>所有创建删除操作尽量加上判断，以免报错</strong></p>
<p><strong>注意点</strong>：</p>
<ul>
<li>`` 字段名使用这个包裹。</li>
<li>— 注释</li>
<li>sql关键字大小写不敏感，建议用小写（狂神）！</li>
<li>所有符号全部用英文。</li>
</ul>
<h2 id="3-MySQL数据管理"><a href="#3-MySQL数据管理" class="headerlink" title="3.MySQL数据管理"></a>3.MySQL数据管理</h2><h3 id="3-1-外键"><a href="#3-1-外键" class="headerlink" title="3.1 外键"></a>3.1 外键</h3><blockquote>
<p>方式一 在创建表时增加约束（麻烦，比较复杂）</p>
</blockquote>
<pre><code class="hljs mysql">CREATE TABLE IF NOT EXISTS grade(
&#96;gradeid&#96; INT(30) NOT NULL AUTO_INCREMENT COMMENT &#39;年级号&#39;,
&#96;gradename&#96; VARCHAR(30) NOT NULL COMMENT &#39;年级名称&#39;,
PRIMARY KEY(&#96;gradeid&#96;)
)ENGINE INNODB CHARSET utf8;

--学生表的 gradeid 字段要去引用年级表的 gradeid
--定义外键 key
--给这个外键添加约束(执行引用) references 引用

CREATE TABLE IF NOT EXISTS student(
&#96;id&#96; INT(4) NOT NULL AUTO_INCREMENT COMMENT &#39;学号&#39;,
&#96;gradeid&#96; INT(30) NOT NULL COMMENT &#39;学生的年级&#39;,
&#96;pwd&#96; VARCHAR(20) NOT NULL DEFAULT &#39;123456&#39; COMMENT &#39;登陆密码&#39;,
&#96;name&#96; VARCHAR(30) NOT NULL DEFAULT &#39;匿名&#39; COMMENT &#39;姓名&#39;,
&#96;sex&#96; VARCHAR(2) NOT NULL DEFAULT &#39;女&#39; COMMENT &#39;性别&#39;,
&#96;birthday&#96; DATETIME DEFAULT NULL COMMENT &#39;出生日期&#39;,
&#96;address&#96; VARCHAR(100) DEFAULT NULL COMMENT &#39;地址&#39;,
&#96;email&#96; VARCHAR(100) DEFAULT NULL COMMENT &#39;邮箱&#39;,
PRIMARY KEY(&#96;id&#96;),
KEY &#96;FK_gradeid&#96; (&#96;gradeid&#96;),
CONSTRAINT &#96;FK_gradeid&#96; FOREIGN KEY (&#96;gradeid&#96;) REFERENCES &#96;grade&#96;(&#96;gradeid&#96;)
)ENGINE INNODB CHARSET utf8;</code></pre>
<p>删除有外键关系表的时候，必须要先删除引用别人的表（从表），再删除被引用的表（主表）。</p>
<blockquote>
<p>方式二 创建表成功后 添加外键约束</p>
</blockquote>
<pre><code class="hljs mysql">--ALTER TABLE 表 ADD CONSTRAINT 约束名 FOREIGN KEY(作为外键的列) REFERENCES 那个表(那个字段);

ALTER TABLE student ADD CONSTRAINT &#96;FK_gradeid&#96; FOREIGN KEY(&#96;gradeid&#96;) REFERENCES &#96;grade&#96;(&#96;gradeid&#96;);

# 物理外键 数据库级别的外键，不建议使用，避免数据库过多造成困扰。</code></pre>
<p><strong>最佳实践</strong></p>
<ul>
<li><p>数据库就是单纯的表，只用来存数据，只有行（数据)和列(字段)</p>
</li>
<li><p>我们想使用多张表的数据，想使用外键(程序去实现)</p>
</li>
</ul>
<h3 id="3-2-DML语言全部记住"><a href="#3-2-DML语言全部记住" class="headerlink" title="3.2 DML语言全部记住"></a>3.2 DML语言全部记住</h3><p><strong>数据库意义</strong>：数据存储，数据管理</p>
<p>DML语言： 数据操作语言</p>
<ul>
<li>insert</li>
<li>update</li>
<li>delete</li>
</ul>
<h3 id="3-3-添加"><a href="#3-3-添加" class="headerlink" title="3.3 添加"></a>3.3 添加</h3><blockquote>
<p>insert</p>
</blockquote>
<pre><code class="hljs mysql">-- 插入语句
-- insert into 表名([字段名1，字段名2，字段名3])values(值1),(值2),(值3),(……)
INSERT INTO &#96;grade&#96;(&#96;gradename&#96;)VALUES(&#39;大四&#39;)

-- 由于主键自增我们可以省略（如果不写表的字段，他会一一插入）
-- 即：
INSERT INTO &#96;grade&#96; VALUES(&#39;01&#39;,&#39;大一&#39;)
INSERT INTO &#96;grade&#96;(&#96;gradeid&#96;,&#96;gradename&#96;) VALUES(&#39;01&#39;,&#39;大一&#39;)

-- 一般写插入语句，我们一定要数据和字段一一对应！

-- 插入多个字段
INSERT INTO &#96;grade&#96;(&#96;gradename&#96;) VALUES(&#39;大一&#39;),(&#39;大二&#39;)</code></pre>
<pre><code class="hljs mysql"># 删除原来的表
DROP TABLE student;
DROP TABLE grade;
# 创建新表
CREATE TABLE IF NOT EXISTS grade(
&#96;gradeid&#96; INT(30) NOT NULL AUTO_INCREMENT COMMENT &#39;年级号&#39;,
&#96;gradename&#96; VARCHAR(30) NOT NULL COMMENT &#39;年级名称&#39;,
PRIMARY KEY(&#96;gradeid&#96;)
)ENGINE INNODB CHARSET utf8;

CREATE TABLE IF NOT EXISTS student(
&#96;id&#96; INT(4) NOT NULL AUTO_INCREMENT COMMENT &#39;学号&#39;,
&#96;gradeid&#96; INT(30) NOT NULL DEFAULT &#39;16&#39; COMMENT &#39;学生的年级&#39;,
&#96;pwd&#96; VARCHAR(20) NOT NULL DEFAULT &#39;123456&#39; COMMENT &#39;登陆密码&#39;,
&#96;name&#96; VARCHAR(30) NOT NULL DEFAULT &#39;匿名&#39; COMMENT &#39;姓名&#39;,
&#96;sex&#96; VARCHAR(2) NOT NULL DEFAULT &#39;女&#39; COMMENT &#39;性别&#39;,
&#96;birthday&#96; DATETIME DEFAULT NULL COMMENT &#39;出生日期&#39;,
&#96;address&#96; VARCHAR(100) DEFAULT NULL COMMENT &#39;地址&#39;,
&#96;email&#96; VARCHAR(100) DEFAULT NULL COMMENT &#39;邮箱&#39;,
PRIMARY KEY(&#96;id&#96;)
)ENGINE INNODB CHARSET utf8;
# 插入一个数据
INSERT INTO &#96;student&#96;(&#96;name&#96;) VALUES(&#39;张三&#39;)
# 插入多条数据（一一对应）
INSERT INTO &#96;student&#96;(&#96;name&#96;,&#96;pwd&#96;,&#96;sex&#96;,&#96;gradeid&#96;) VALUES(&#39;李四&#39;,&#39;aaaaa&#39;,&#39;男&#39;,&#39;033&#39;)</code></pre>
<p><strong>语法</strong>：<code>insert into 表名([字段名1，字段名2，字段名3])values(值1),(值2),(值3),(……)</code></p>
<p><strong>注意事项：</strong></p>
<ul>
<li>字段字段之间使用英文,隔开</li>
<li>字段是可以省路的，但是后面的值必须要一一对应<pre><code class="hljs mysql">INSERT INTO &#96;student&#96; VALUES(&#39;033&#39;,&#39;003&#39;,&#39;baixf&#39;,&#39;白小飞&#39;,&#39;男&#39;,&#39;20000301&#39;,&#39;泰安&#39;,&#39;707401057@qq.com&#39;)</code></pre>
<img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122153509.png" srcset="/img/loading.gif" alt=""></li>
<li>可以同时插入多条数据，VALUES后面的值，需要使用<code>VALUES(),()……</code>隔开</li>
</ul>
<h3 id="3-4-修改"><a href="#3-4-修改" class="headerlink" title="3.4 修改"></a>3.4 修改</h3><blockquote>
<p>update 修改谁 （条件） set 原来的值 = 新值</p>
</blockquote>
<pre><code class="hljs mysql">--修改学员名字,带了简介
UPDATE &#96;student&#96; SET NAME&#x3D;&#39;杨洪利&#39; WHERE &#96;id&#96; &#x3D; &#39;1&#39;;

--不指定条件的情况下，会改动所有表!
UPDATE &#96;student&#96; SET NAME&#x3D;&#39;荣耀v40&#39;;

--修改多个属性 , 隔开
UPDATE &#96;student&#96; SET &#96;name&#96;&#x3D;&#39;白小飞&#39;,&#96;email&#96;&#x3D;&#39;707401057@qq.com&#39; WHERE &#96;id&#96;&#x3D;1

--通过多个条件进行判断，无上限
UPDATE &#96;student&#96; SET &#96;name&#96;&#x3D;&#39;Red K40&#39; WHERE &#96;name&#96;&#x3D;&#39;荣耀v40&#39; AND &#96;sex&#96;&#x3D;&#39;女&#39;

--语法:
UPDATE 表名 srt colnum_name &#x3D; value[,colnum_name &#x3D; value,……] where 条件</code></pre>
<p><strong>条件：where 子句 运算符</strong>  </p>
<p>id等于某个值，大于某个值，或者在区间内修改。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>操作符</th>
<th>含义</th>
<th>范围</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>等于</td>
<td>5=6</td>
<td>false</td>
</tr>
<tr>
<td>&lt;&gt;或！=</td>
<td>不等于</td>
<td>5&lt;&gt;6</td>
<td>true</td>
</tr>
<tr>
<td>&gt;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;=</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&gt;=</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>BETWEEN  AND</td>
<td>在某个<strong>闭合</strong>区间</td>
<td>between 2 and 5</td>
<td></td>
</tr>
<tr>
<td>AND</td>
<td>我和你&amp;&amp;</td>
<td>5&gt;1 AND 1&gt;2</td>
<td>false</td>
</tr>
<tr>
<td>OR</td>
<td>我或你\</td>
<td>\</td>
<td></td>
<td>5&gt;1 OR 1&gt;2</td>
<td>true</td>
</tr>
</tbody>
</table>
</div>
<p><strong>语法：</strong><code>UPDATE_表名 set co1num_name = value,[co1num_name = value,.. . .] where [条件]</code></p>
<p><strong>注意;</strong></p>
<ul>
<li><p>colnum_name是数据库的列，尽量带上``</p>
</li>
<li><p>条件，筛选的条件，如果没有指定，则会修改所有的列</p>
</li>
<li><p>value，是一个具体的值，也可以是一个变量</p>
</li>
<li><p>多个设置的属性之间，使用英文逗号隔开</p>
</li>
</ul>
<pre><code class="hljs mysql">UPDATE ‘student’ SET &#96;birthday&#39;&#x3D; CURRENT_TIME WHERE &#96;name&#96; &#x3D; &#39;长江7号&#39; AND sex&#x3D;&#39;女&#39;</code></pre>
<h3 id="3-5-删除"><a href="#3-5-删除" class="headerlink" title="3.5 删除"></a>3.5 删除</h3><blockquote>
<p>delete 命令</p>
</blockquote>
<pre><code class="hljs mysql">--删除数据（不建议这样使用）
DELETE FROM student;

--删除指定数据
DELETE FROM &#96;student&#96; WHERE &#96;id&#96;&#x3D;&#39;1&#39;;</code></pre>
<blockquote>
<p>TRUNCATE 命令</p>
</blockquote>
<pre><code class="hljs mysql">--清空student表
TRUNCATE &#96;student&#96;</code></pre>
<blockquote>
<p>delete 和 TRUNCATE 的区别</p>
</blockquote>
<ul>
<li><p>相同点：都能删除数据，都不会删除数据表结构</p>
</li>
<li><p>不同点 ：</p>
<pre><code>   *  TRUNCATE 重新设置 自增列 计数器会清零
   *  TRUNCATE 不会影响事务
</code></pre></li>
</ul>
<pre><code class="hljs mysql">--测试delete和TRUNCATE区别

CREATETABLE &#96;test&#96;(
&#96;id&#96; INT(4) NOT NULL AUTO_INCREMENT,
&#96;coll&#96; VARCHAR(20) NOT NULL,
PRIMARY KEY (&#39;id&#39;)
)ENGINE&#x3D;INNODB DEFAULT CHARSET&#x3D;utf8

-- 添加数据
INSERT INTO &#96;test&#96;(&#96;coll&#96;) VALUES(&#39;01&#39;),(&#39;02&#39;),(&#39;03&#39;);

-- 自增会归零
DELETE FROM &#96;test&#96;

-- 不会影响自增
TRUNCATE &#96;test&#96;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122163050.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122163220.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>了解即可：</strong>delete删除的问题，重启数据库，现象</p>
<ul>
<li>INNODB 自增列从1开始（存在内存中，断电即失）</li>
<li>MyISAM  继续从上一个字增量开始（存在文件中，不丢失）</li>
</ul>
<h2 id="4-DQL查询数据"><a href="#4-DQL查询数据" class="headerlink" title="4. DQL查询数据"></a>4. DQL查询数据</h2><h3 id="4-1-DQL"><a href="#4-1-DQL" class="headerlink" title="4.1 DQL"></a>4.1 DQL</h3><p>（data query language:数据查询语言）</p>
<ul>
<li>所有的查询操作都用它 select</li>
<li>简单的查询，复杂的查询他都能做</li>
<li>数据库中最核心的语言，最重要的语言</li>
<li>使用频率最高的语句</li>
</ul>
<blockquote>
<p><strong>SELECT语法</strong></p>
</blockquote>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122223514.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>执行下面sql语句建立插入数据</strong></p>
<pre><code class="hljs mysql">-- 创建一个school数据库
CREATE DATABASE IF NOT EXISTS &#96;school&#96;;

-- 使用schooll数据库
USE &#96;school&#96;;

-- 创建学生表
DROP TABLE IF EXISTS &#96;student&#96;;
CREATE TABLE &#96;student&#96;(
&#96;studentno&#96; INT(4) NOT NULL COMMENT &#39;学号&#39;,
&#96;loginpwd&#96; VARCHAR(20) DEFAULT NULL,
&#96;studentname&#96; VARCHAR(20) DEFAULT NULL COMMENT &#39;学生姓名&#39;,
&#96;sex&#96; TINYINT(1) DEFAULT NULL COMMENT &#39;性别，0或1&#39;,
&#96;gradeid&#96; INT(11) DEFAULT NULL COMMENT &#39;年级编号&#39;,
&#96;phone&#96; VARCHAR(50) NOT NULL COMMENT &#39;联系电话，允许为空&#39;,
&#96;address&#96; VARCHAR(255) NOT NULL COMMENT &#39;地址，允许为空&#39;,
&#96;borndate&#96; DATETIME DEFAULT NULL COMMENT &#39;出生时间&#39;,
&#96;email&#96; VARCHAR (50) NOT NULL COMMENT &#39;邮箱账号允许为空&#39;,
&#96;identitycard&#96; VARCHAR(18) DEFAULT NULL COMMENT &#39;身份证号&#39;,
PRIMARY KEY (&#96;studentno&#96;),
UNIQUE KEY &#96;identitycard&#96;(&#96;identitycard&#96;),
KEY &#96;email&#96; (&#96;email&#96;)
)ENGINE&#x3D;MYISAM DEFAULT CHARSET&#x3D;utf8;

-- 创建年级表
DROP TABLE IF EXISTS &#96;grade&#96;;
CREATE TABLE &#96;grade&#96;(
	&#96;gradeid&#96; INT(11) NOT NULL AUTO_INCREMENT COMMENT &#39;年级编号&#39;,
  &#96;gradename&#96; VARCHAR(50) NOT NULL COMMENT &#39;年级名称&#39;,
    PRIMARY KEY (&#96;gradeid&#96;)
) ENGINE&#x3D;INNODB AUTO_INCREMENT &#x3D; 6 DEFAULT CHARSET &#x3D; utf8;

-- 创建科目表
DROP TABLE IF EXISTS &#96;subject&#96;;
CREATE TABLE &#96;subject&#96;(
	&#96;subjectno&#96;INT(11) NOT NULL AUTO_INCREMENT COMMENT &#39;课程编号&#39;,
    &#96;subjectname&#96; VARCHAR(50) DEFAULT NULL COMMENT &#39;课程名称&#39;,
    &#96;classhour&#96; INT(4) DEFAULT NULL COMMENT &#39;学时&#39;,
    &#96;gradeid&#96; INT(4) DEFAULT NULL COMMENT &#39;年级编号&#39;,
    PRIMARY KEY (&#96;subjectno&#96;)
)ENGINE &#x3D; INNODB AUTO_INCREMENT &#x3D; 19 DEFAULT CHARSET &#x3D; utf8;

-- 创建成绩表
DROP TABLE IF EXISTS &#96;result&#96;;
CREATE TABLE &#96;result&#96;(
	&#96;studentno&#96; INT(4) NOT NULL COMMENT &#39;学号&#39;,
    &#96;subjectno&#96; INT(4) NOT NULL COMMENT &#39;课程编号&#39;,
    &#96;examdate&#96; DATETIME NOT NULL COMMENT &#39;考试日期&#39;,
    &#96;studentresult&#96; INT (4) NOT NULL COMMENT &#39;考试成绩&#39;,
    KEY &#96;subjectno&#96; (&#96;subjectno&#96;)
)ENGINE &#x3D; INNODB DEFAULT CHARSET &#x3D; utf8;

-- 插入学生数据 其余自行添加 这里只添加了2行
INSERT INTO &#96;student&#96; (&#96;studentno&#96;,&#96;loginpwd&#96;,&#96;studentname&#96;,&#96;sex&#96;,&#96;gradeid&#96;,&#96;phone&#96;,&#96;address&#96;,&#96;borndate&#96;,&#96;email&#96;,&#96;identitycard&#96;)
VALUES
(1000,&#39;123456&#39;,&#39;张伟&#39;,0,2,&#39;13800001234&#39;,&#39;北京朝阳&#39;,&#39;1980-1-1&#39;,&#39;text123@qq.com&#39;,&#39;123456198001011234&#39;),
(1001,&#39;123456&#39;,&#39;赵强&#39;,1,3,&#39;13800002222&#39;,&#39;广东深圳&#39;,&#39;1990-1-1&#39;,&#39;text111@qq.com&#39;,&#39;123456199001011233&#39;);

-- 插入成绩数据  这里仅插入了一组，其余自行添加
INSERT INTO &#96;result&#96;(&#96;studentno&#96;,&#96;subjectno&#96;,&#96;examdate&#96;,&#96;studentresult&#96;)
VALUES
(1000,1,&#39;2013-11-11 16:00:00&#39;,85),
(1000,2,&#39;2013-11-12 16:00:00&#39;,70),
(1000,3,&#39;2013-11-11 09:00:00&#39;,68),
(1000,4,&#39;2013-11-13 16:00:00&#39;,98),
(1000,5,&#39;2013-11-14 16:00:00&#39;,58);

-- 插入年级数据
INSERT INTO &#96;grade&#96; (&#96;gradeid&#96;,&#96;gradename&#96;) VALUES(1,&#39;大一&#39;),(2,&#39;大二&#39;),(3,&#39;大三&#39;),(4,&#39;大四&#39;),(5,&#39;预科班&#39;);

-- 插入科目数据
INSERT INTO &#96;subject&#96;(&#96;subjectno&#96;,&#96;subjectname&#96;,&#96;classhour&#96;,&#96;gradeid&#96;)VALUES
(1,&#39;高等数学-1&#39;,110,1),
(2,&#39;高等数学-2&#39;,110,2),
(3,&#39;高等数学-3&#39;,100,3),
(4,&#39;高等数学-4&#39;,130,4),
(5,&#39;C语言-1&#39;,110,1),
(6,&#39;C语言-2&#39;,110,2),
(7,&#39;C语言-3&#39;,100,3),
(8,&#39;C语言-4&#39;,130,4),
(9,&#39;Java程序设计-1&#39;,110,1),
(10,&#39;Java程序设计-2&#39;,110,2),
(11,&#39;Java程序设计-3&#39;,100,3),
(12,&#39;Java程序设计-4&#39;,130,4),
(13,&#39;数据库结构-1&#39;,110,1),
(14,&#39;数据库结构-2&#39;,110,2),
(15,&#39;数据库结构-3&#39;,100,3),
(16,&#39;数据库结构-4&#39;,130,4),
(17,&#39;C#基础&#39;,130,1);</code></pre>
<h3 id="4-2-指定查询字段"><a href="#4-2-指定查询字段" class="headerlink" title="4.2 指定查询字段"></a>4.2 指定查询字段</h3><pre><code class="hljs mysql">-- 查询全部的学生 select * from 表
SELECT * FROM &#96;student&#96;

-- 查询指定字段
SELECT &#96;studentno&#96;,&#96;studentname&#96; FROM &#96;student&#96;

-- 别名，给结果起名字
SELECT &#96;studentno&#96; AS 学号,&#96;studentname&#96; AS 学生姓名 FROM &#96;student&#96;

-- 还可以给查寻的表起别名
SELECT &#96;studentno&#96; AS 学号,&#96;studentname&#96; AS 学生姓名 FROM &#96;student&#96; AS s</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122165608.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122165620.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122165652.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 函数 Concat(a,b) 拼接字符串
SELECT CONCAT(&#39;姓名：&#39;,&#96;studentname&#96;) AS &#39;新名字&#39; FROM &#96;student&#96;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122170618.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>语法：</strong><code>SELECT 字段  ... FROM 表</code></p>
<blockquote>
<p>有的时候，列名字不是那么的见名知意。我们起别名As</p>
<p>字段名 as 别名      表名 as 别名</p>
<p>去重   distinct</p>
</blockquote>
<pre><code class="hljs mysql">-- 查询一下那些同学参加了考试，成绩（result表）
SELECT * FROM &#96;result&#96;

-- 查询哪些学号的同学参加了考试(含重复的)
SELECT &#96;studentno&#96; FROM &#96;result&#96;

-- 发现重复数据，去重
SELECT DISTINCT &#96;studentno&#96; FROM &#96;result&#96;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122171607.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122171618.png" srcset="/img/loading.gif" alt=""></p>
<blockquote>
<p>数据库的列</p>
</blockquote>
<pre><code class="hljs mysql">-- 查看系统版本(函数)
SELECT VERSION()

-- 用来计算（计算表达式）
SELECT 200-3*58 AS &#39;查询结果&#39;

-- 查询自增的步长（变量）
SELECT @@auto_increment_increment

-- 将查询到的成绩整体加一分
SELECT &#96;studentno&#96;,&#96;studentresult&#96;+1 AS &#39;加分后&#39; FROM &#96;result&#96;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122171825.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122172611.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122172559.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122172547.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>数据库中的表达式:文本值，列，Null，函数，计算表达式，系统变量….</strong></p>
<p><strong>格式：</strong></p>
<p><code>select 表达式 from 表</code></p>
<h3 id="4-3-where条件句子"><a href="#4-3-where条件句子" class="headerlink" title="4.3 where条件句子"></a>4.3 where条件句子</h3><p>作用：检索数据中<code>符合条件</code>的值</p>
<blockquote>
<p>逻辑运算符:尽量使用英文</p>
</blockquote>
<p>搜索的条件由一个或多个表达式组成！结果为布尔值</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>and &amp;&amp;</td>
<td>a and  a&amp;&amp;b</td>
<td>逻辑与，全为真则真</td>
</tr>
<tr>
<td>or \</td>
<td>\</td>
<td></td>
<td>a or b a\</td>
<td>\</td>
<td>b</td>
<td>逻辑或，有一真则为真</td>
</tr>
<tr>
<td>Not !</td>
<td>not a ! a</td>
<td>逻辑非，取反</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="hljs mysql"># 查询成绩在85-100范围的学生

-------------------------
SELECT &#96;studentno&#96;,&#96;studentresult&#96; FROM result

# 查询成绩大于80小于100的所有学号
SELECT &#96;studentno&#96;,&#96;studentresult&#96; FROM result
WHERE &#96;studentresult&#96;&gt;&#x3D;80 AND &#96;studentresult&#96;&lt;&#x3D;100

# &amp;&amp;
SELECT &#96;studentno&#96;,&#96;studentresult&#96; FROM result
WHERE &#96;studentresult&#96;&gt;&#x3D;80 &amp;&amp; &#96;studentresult&#96;&lt;&#x3D;100

# 模糊查询（区间范围内）
SELECT &#96;studentno&#96;,&#96;studentresult&#96; FROM result
WHERE &#96;studentresult&#96; BETWEEN 85 AND 100</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122174558.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql"># 查询除studentno&#x3D;1000以外的学生成绩
SELECT &#96;studentno&#96;,&#96;studentresult&#96; FROM result
WHERE &#96;studentno&#96; !&#x3D; 1000

SELECT &#96;studentno&#96;,&#96;studentresult&#96; FROM result
WHERE NOT &#96;studentno&#96; &#x3D; 1000</code></pre>
<blockquote>
<p>模糊查询：比较运算符</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>运算符</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>IS NULL</td>
<td>a is null</td>
<td>如果操作符为NULL则结果为真</td>
</tr>
<tr>
<td>IS NOT NULL</td>
<td>a is not null</td>
<td>如果操作符为not NULL则结果为真</td>
</tr>
<tr>
<td>BETWEEN AND</td>
<td>a between b and c</td>
<td>若a在和c之间，结果为真</td>
</tr>
<tr>
<td><strong>LIKE</strong></td>
<td>a like b</td>
<td>SQL匹配，如果a匹配，则结果为真</td>
</tr>
<tr>
<td><strong>IN</strong></td>
<td>a in (a1,a2……）</td>
<td>假设a在a1,或者a2……其中的某一个值中，结果为真</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="hljs mysql"># 模糊查询
# 查询名字中姓赵的同学
# like结合%(0-任一个字符) _(一个字符)
SELECT &#96;studentno&#96;,&#96;studentname&#96; FROM &#96;student&#96;
WHERE &#96;studentname&#96; LIKE &#39;赵%&#39;

# 查询赵后面只有一个字的同学
SELECT &#96;studentno&#96;,&#96;studentname&#96; FROM &#96;student&#96;
WHERE &#96;studentname&#96; LIKE &#39;赵_&#39;

# 查询赵后面只有两个字的同学
SELECT &#96;studentno&#96;,&#96;studentname&#96; FROM &#96;student&#96;
WHERE &#96;studentname&#96; LIKE &#39;赵__&#39;

# 查询名字中有强字的同学
SELECT &#96;studentno&#96;,&#96;studentname&#96; FROM &#96;student&#96;
WHERE &#96;studentname&#96; LIKE &#39;%强%&#39;
</code></pre>
<pre><code class="hljs mysql"># in(具体的一个或者多个值)
# 查询1000，1001号学员信息
SELECT &#96;studentno&#96;,&#96;studentname&#96; FROM &#96;student&#96;
WHERE &#96;studentno&#96; IN (1000,1001);

# 查询在北京的学生
SELECT &#96;studentno&#96;,&#96;studentname&#96;,&#96;address&#96; FROM &#96;student&#96;
WHERE &#96;address&#96; IN (&#39;北京朝阳&#39;);</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122193032.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122193041.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql"># NULL
# 查询地址为空的学生
SELECT &#96;studentno&#96;,&#96;studentname&#96;,&#96;address&#96; FROM &#96;student&#96;
WHERE &#96;address&#96;&#x3D;&#39;&#39; OR &#96;address&#96; IS NULL

# NOT NULL
# 查询有出生日期的同学
SELECT &#96;studentno&#96;,&#96;studentname&#96;,&#96;address&#96; FROM &#96;student&#96;
WHERE &#96;borndate&#96; IS NOT NULL

# 查询无出生日期的同学
SELECT &#96;studentno&#96;,&#96;studentname&#96;,&#96;address&#96; FROM &#96;student&#96;
WHERE &#96;borndate&#96; IS NULL</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122193635.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122193644.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122193655.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="4-4-联表查询"><a href="#4-4-联表查询" class="headerlink" title="4.4 联表查询"></a>4.4 联表查询</h3><blockquote>
<p>join 对比</p>
</blockquote>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122202508.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/1445197-20191221112233284-1442014363.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- ------- 联表查询 join -------
# 查询参加了考试的同学（学号,姓名,科目编号,科目成绩）

&#x2F;*思路
1．分析需求，分析查询的字段来自哪些表，（连接查询&gt;
2．确定使用哪种连接查询? 7种
确定交叉点(这两个表中哪个数据是相同的)
判断的条件:学生表的中 studentNo &#x3D; 成绩表 studentNo
*&#x2F;

# INNER JOIN
SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS s
INNER JOIN &#96;result&#96; AS r
WHERE s.studentno&#x3D;r.studentno

# INNER JOIN
SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS s
INNER JOIN &#96;result&#96; AS r
ON s.studentno&#x3D;r.studentno

-- 拓展 join on 与 where
-- jion（连接的表） on（判断的条件） 连接查询
-- where 等值查询


# RIGHT JOIN
SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; s
RIGHT JOIN &#96;result&#96; r
ON s.studentno &#x3D; r.studentno

# LEFT JOIN
SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; s
LEFT JOIN &#96;result&#96; r
ON s.studentno &#x3D; r.studentno</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122205550.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122210627.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122205533.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122205514.png" srcset="/img/loading.gif" alt=""></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>操作</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>inner join</td>
<td>如果表中有一个匹配项就返回行</td>
</tr>
<tr>
<td>left join</td>
<td>从左表中返回所有的值，即使右表中没有匹配</td>
</tr>
<tr>
<td>right join</td>
<td>从右表中返回所有的值，即使左表中没有匹配</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="hljs mysql"># 查询缺考的同学
SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; s
LEFT JOIN &#96;result&#96; r
ON s.studentno &#x3D; r.studentno
WHERE studentresult IS NULL</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122210349.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 思考题（查询参加了考试的信息：学号，学生名，科目名，分数）
&#x2F;*思路
1．分析需求，分析查询的字段来自哪些表，（连接查询&gt;
2．确定使用哪种连接查询? 7种
确定交叉点(这两个表中哪个数据是相同的)
判断的条件:学生表的中 studentNo &#x3D; 成绩表 studentNo
*&#x2F;
SELECT s.studentno,&#96;studentname&#96;,&#96;subjectname&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS s
RIGHT JOIN &#96;result&#96; AS r 
ON s.studentno &#x3D; r.studentno
INNER JOIN &#96;subject&#96; AS sub
ON r.subjectno &#x3D; sub.subjectno</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122211952.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql"># 解题思路

-- 我要查询哪些数据select ..。
-- 从那几个表中查 FROM 表 xxx Join 连接的表 on 交叉条件
-- 假设存在一种多张表查询，慢慢来，先查询两张表然后再慢慢增加

-- FROM a LEFT JOIN b # 以a表的为基准依据
-- FROM a RIGHT JOIN b # 以b表的为基准依据
-- FROM INNER JOIN   # 以两者共有的为基准依据</code></pre>
<pre><code class="hljs mysql">练习1：
-- 查询学员所属的年级(学号，学生的姓名，年级名称)
SELECT &#96;studentno&#96;,&#96;studentname&#96;,&#96;gradename&#96;
FROM &#96;student&#96; AS s
LEFT JOIN &#96;grade&#96; AS g
ON s.&#96;gradeid&#96;&#x3D;g.&#96;gradeid&#96;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122215507.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">练习2：
-- 查询科目所属的年级（科目名称，年级名称)
SELECT &#96;subjectname&#96;,&#96;gradename&#96;
FROM &#96;subject&#96; AS s
INNER JOIN &#96;grade&#96; AS g
ON s.&#96;gradeid&#96;&#x3D;g.&#96;gradeid&#96;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122220054.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">练习3：
-- 查询了参加考试的同学信息(学号，学生姓名，科目名，分数)
SELECT stu.&#96;studentno&#96;,&#96;studentname&#96;,&#96;subjectname&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS stu
RIGHT JOIN &#96;result&#96; AS r
ON stu.&#96;studentno&#96;&#x3D;r.&#96;studentno&#96;
INNER JOIN &#96;subject&#96; AS sub
ON sub.&#96;subjectno&#96;&#x3D;r.&#96;subjectno&#96;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122220956.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">练习4：
-- 查询了参加高等数学-2考试的同学信息(学号，学生姓名，科目名，分数)
SELECT stu.&#96;studentno&#96;,&#96;studentname&#96;,&#96;subjectname&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS stu
RIGHT JOIN &#96;result&#96; AS r
ON stu.&#96;studentno&#96;&#x3D;r.&#96;studentno&#96;
INNER JOIN &#96;subject&#96; AS sub
ON sub.&#96;subjectno&#96;&#x3D;r.&#96;subjectno&#96;
WHERE sub.&#96;subjectname&#96;&#x3D;&#39;高等数学-2&#39;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122221249.png" srcset="/img/loading.gif" alt=""></p>
<blockquote>
<p>自连接：自己的表和自己的表相连接（了解）</p>
</blockquote>
<p>执行以下sql,导入数据</p>
<pre><code class="hljs mysql">CREATE TABLE category (
	categoryid INT(10) UNSIGNED NOT NULL auto_increment COMMENT &#39;主题ID&#39;,
	pid INT(10) NOT NULL COMMENT &#39;父ID&#39;,
	categoryName VARCHAR(50) NOT NULL COMMENT &#39;主题名字&#39;,
	PRIMARY KEY(categoryid)
) ENGINE&#x3D;INNODB auto_increment&#x3D;9 DEFAULT CHARSET &#x3D; utf8;

INSERT INTO category(categoryid,pid,categoryName)
VALUES(&#39;2&#39;,&#39;1&#39;,&#39;信息技术&#39;),(&#39;3&#39;,&#39;1&#39;,&#39;软件开发&#39;),(&#39;4&#39;,&#39;3&#39;,&#39;数据库&#39;),
(&#39;5&#39;,&#39;1&#39;,&#39;美术设计&#39;),(&#39;6&#39;,&#39;3&#39;,&#39;web开发&#39;),(&#39;7&#39;,&#39;5&#39;,&#39;PS技术&#39;),(&#39;8&#39;,&#39;2&#39;,&#39;办公信息&#39;);</code></pre>
<p><strong>核心：将一张表拆为两张一样的表即可。</strong></p>
<p>父类</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>categoryid</th>
<th>categoryName</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>信息技术</td>
</tr>
<tr>
<td>3</td>
<td>软件开发</td>
</tr>
<tr>
<td>5</td>
<td>美术设计</td>
</tr>
</tbody>
</table>
</div>
<p>子类</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>pid</th>
<th>categoryid</th>
<th>categoryName</th>
</tr>
</thead>
<tbody>
<tr>
<td>3</td>
<td>4</td>
<td>数据库</td>
</tr>
<tr>
<td>2</td>
<td>8</td>
<td>办公信息</td>
</tr>
<tr>
<td>3</td>
<td>6</td>
<td>we开发</td>
</tr>
<tr>
<td>5</td>
<td>7</td>
<td>ps技术</td>
</tr>
</tbody>
</table>
</div>
<p><strong>操作：查询父类对应的子类关系</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>父类</th>
<th>子类</th>
</tr>
</thead>
<tbody>
<tr>
<td>信息技术</td>
<td>办公信息</td>
</tr>
<tr>
<td>软件开发</td>
<td>数据库</td>
</tr>
<tr>
<td>软件开发</td>
<td>web开发</td>
</tr>
<tr>
<td>美术设计</td>
<td>ps技术</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="hljs mysql">-- 查询父子关系表，把两张表看成两张一模一样的表
SELECT a.&#96;categoryName&#96;,b.&#96;categoryName&#96;
FROM &#96;category&#96; AS a,&#96;category&#96; AS b
WHERE a.&#96;categoryid&#96;&#x3D;b.&#96;pid&#96;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210122214924.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="4-5分页和排序"><a href="#4-5分页和排序" class="headerlink" title="4.5分页和排序"></a>4.5分页和排序</h3><blockquote>
<p>排序</p>
</blockquote>
<pre><code class="hljs mysql">-- 分页和排序
-- ORDER BY 通过哪个字段排序
 -- 排序：升序ASC，降序DESC
SELECT stu.&#96;studentno&#96;,&#96;studentname&#96;,&#96;subjectname&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS stu
RIGHT JOIN &#96;result&#96; AS r
ON stu.&#96;studentno&#96;&#x3D;r.&#96;studentno&#96;
INNER JOIN &#96;subject&#96; AS sub
ON sub.&#96;subjectno&#96;&#x3D;r.&#96;subjectno&#96;
ORDER BY &#96;studentresult&#96; DESC

-- 升序
SELECT stu.&#96;studentno&#96;,&#96;studentname&#96;,&#96;subjectname&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS stu
RIGHT JOIN &#96;result&#96; AS r
ON stu.&#96;studentno&#96;&#x3D;r.&#96;studentno&#96;
INNER JOIN &#96;subject&#96; AS sub
ON sub.&#96;subjectno&#96;&#x3D;r.&#96;subjectno&#96;
ORDER BY &#96;studentresult&#96; ASC</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210123111003.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210123111017.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 100w条数据
-- 为什么分页
-- 缓解数据库压力， 瀑布流

-- 分页
-- 语法：limit 起始页，页面的大小
-- LIMIT 0,3 1~3页
SELECT stu.&#96;studentno&#96;,&#96;studentname&#96;,&#96;subjectname&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS stu
RIGHT JOIN &#96;result&#96; AS r
ON stu.&#96;studentno&#96;&#x3D;r.&#96;studentno&#96;
INNER JOIN &#96;subject&#96; AS sub
ON sub.&#96;subjectno&#96;&#x3D;r.&#96;subjectno&#96;
ORDER BY &#96;studentresult&#96; ASC
LIMIT 0,3

-- limit 1,3 从第一页开始往下三页
SELECT stu.&#96;studentno&#96;,&#96;studentname&#96;,&#96;subjectname&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS stu
RIGHT JOIN &#96;result&#96; AS r
ON stu.&#96;studentno&#96;&#x3D;r.&#96;studentno&#96;
INNER JOIN &#96;subject&#96; AS sub
ON sub.&#96;subjectno&#96;&#x3D;r.&#96;subjectno&#96;
ORDER BY &#96;studentresult&#96; ASC
LIMIT 1,3</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210123111831.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210123111841.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 网页应用：当前页，总的页数，页面大小
-- 第一页 limit0,5
-- 第二页 limit 5,5
-- 第三页 limit 10,5
-- 第N页 limit (N-1)*pagesize,pagesize
-- pagesize:页面大小
-- (N-1)*pagesize:起始值
-- N:当前页
-- 数据总数&#x2F;页面大小&#x3D;总页数</code></pre>
<p><strong>语法：<code>limit(查询起始值，需要查询的条数)</code></strong></p>
<pre><code class="hljs mysql">练习1：
-- 查询 JAVA第一学年课程成绩排名前十的学生，并且分数要大于80 的学生信息（学号，姓名，课程名称，分数)
SELECT stu.&#96;studentno&#96;,&#96;studentname&#96;,&#96;subjectname&#96;,&#96;studentresult&#96;
FROM &#96;student&#96; AS stu
INNER JOIN &#96;result&#96; AS res
ON stu.&#96;studentno&#96;&#x3D;res.&#96;studentno&#96;
INNER JOIN &#96;subject&#96; AS sub
ON sub.&#96;subjectno&#96;&#x3D;res.&#96;subjectno&#96;
WHERE &#96;subjectname&#96;&#x3D;&#39;JAVA&#39; AND &#96;studentresult&#96;&gt;80
ORDER BY &#96;studentresult&#96; DESC
LIMIT 0,10</code></pre>
<h3 id="4-6-子查询"><a href="#4-6-子查询" class="headerlink" title="4.6 子查询"></a>4.6 子查询</h3><blockquote>
<p>where(值是固定的，这个值是计算出来的)</p>
</blockquote>
<p><strong>本质：在where语句中嵌套一个子循环语句</strong></p>
<pre><code class="hljs mysql">-- 子查询
-- 分数不小于80分的学生的学号和姓名，高等数学-1
SELECT DISTINCT s.&#96;studentno&#96;,&#96;studentname&#96; 
FROM &#96;student&#96; AS s
INNER JOIN &#96;result&#96; AS r
ON s.&#96;studentno&#96;&#x3D;r.&#96;studentno&#96;
WHERE r.&#96;studentresult&#96;&gt;&#x3D;80 
AND &#96;subjectno&#96;&#x3D; (
	SELECT &#96;subjectno&#96; FROM &#96;subject&#96;
	WHERE &#96;subjectname&#96;&#x3D;&#39;高等数学-1&#39;
)

-- inner join
-- 分数不小于80分的学生的学号和姓名，高等数学-1
SELECT DISTINCT s.&#96;studentno&#96;,&#96;studentname&#96; 
FROM &#96;student&#96; AS s
INNER JOIN &#96;result&#96; AS r
ON s.&#96;studentno&#96;&#x3D;r.&#96;studentno&#96;
INNER JOIN &#96;subject&#96; AS sub
ON sub.&#96;subjectno&#96;&#x3D; r.&#96;subjectno&#96;
WHERE r.&#96;studentresult&#96;&gt;&#x3D;80 AND &#96;subjectname&#96;&#x3D;&#39;高等数学-1&#39;

-- 子查询再改造(由里及外)
-- 分数不小于80分的学生的学号和姓名，高等数学-1
SELECT &#96;studentno&#96;,&#96;studentname&#96; FROM &#96;student&#96; WHERE &#96;studentno&#96; IN (
SELECT &#96;studentno&#96; FROM &#96;result&#96; WHERE &#96;studentresult&#96;&gt;&#x3D;80 AND &#96;subjectno&#96;&#x3D;(
SELECT &#96;subjectno&#96; FROM &#96;subject&#96; WHERE &#96;subjectname&#96;&#x3D;&#39;高等数学-1&#39;
)
)</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210123191410.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210123191421.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210123191436.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 练习:查询c语言-1前5名同学的成绩的信息(学号，姓名，分数)
-- 使用子查询~
SELECT stu.&#96;studentno&#96;,&#96;studentname&#96;,&#96;studentresult&#96; 
FROM &#96;student&#96; AS stu
INNER JOIN &#96;result&#96; AS res
ON stu.&#96;studentno&#96;&#x3D;res.&#96;studentno&#96;
WHERE &#96;subjectno&#96;&#x3D;(
	SELECT &#96;subjectno&#96; FROM &#96;subject&#96; WHERE &#96;subjectname&#96;&#x3D;&#39;c语言-1&#39;
)
ORDER BY &#96;studentresult&#96; DESC
LIMIT 0,5</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210123191238.png" srcset="/img/loading.gif" alt=""></p>
<h2 id="5-MySQL函数"><a href="#5-MySQL函数" class="headerlink" title="5. MySQL函数"></a>5. MySQL函数</h2><p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/sql-function-reference.html">MySQL官网函数介绍</a></p>
<h3 id="5-1-常用函数"><a href="#5-1-常用函数" class="headerlink" title="5.1 常用函数"></a>5.1 常用函数</h3><pre><code class="hljs mysql">-- 数学运算
SELECT ABS(-8)  -- 绝对值
SELECT CEILING(9.5) -- 向上取整
SELECT FLOOR(10.6) -- 向下取整
SELECT RAND() -- 随机数

SELECT SIGN(-0.66) -- 判断一个数的符号
-- -1
SELECT SIGN(0.66) -- 判断一个数的符号
-- 1
SELECT SIGN(0) -- 判断一个数的符号
-- 0

-- 字符串函数
SELECT CHAR_LENGTH(&#39;白小飞&#39;) -- 字符串长度
-- 3
SELECT CONCAT(&#39;我爱&#39;,&#39;mysql&#39;,&#39;哈哈&#39;) -- 拼接字符串
-- 我爱mysql哈哈
SELECT INSERT(&#39;我爱编程&#39;,1,2,&#39;超级热爱&#39;) -- 查询替换
-- 从第1个起替换2个长度字符
-- 超级热爱编程
SELECT LOWER(&#39;KuangShen&#39;) -- 转小写
-- kuangshen
SELECT UPPER(&#39;baixf&#39;) -- 转大写
-- BAIXF
SELECT INSTR(&#39;baixf&#39;,&#39;x&#39;) -- x 出现在aixf的第几个位置
-- 4
SELECT REPLACE(&#39;baixf-tk&#39;,&#39;tk&#39;,&#39;ml&#39;)
-- baixf-ml
SELECT SUBSTR(&#39;狂神说坚持就能成功&#39;,4,3) -- 返回指定的子字符串（源字符串，截取的位置，截取的长度）
-- 第四个开始截取3个
-- 坚持就
SELECT SUBSTR(&#39;狂神说坚持就能成功&#39;,4) -- 从第四个开始截到尾
-- 坚持就能成功
SELECT REVERSE(&#39;狂神说坚持就能成功&#39;) -- 反转
-- 功成能就持坚说神狂

-- 查询姓 张的同学 ，名字 邹
SELECT REPLACE(&#96;studentname&#96;,&#39;张&#39;,&#39;邹&#39;) FROM student 
WHERE studentname LIKE &#39;张%&#39;

-- 时间和日期函数（记住）
SELECT CURRENT_DATE() -- 获取当前日期
SELECT CURDATE() -- 获取当前日期
-- 2021-01-23
SELECT NOW() -- 获取当前时间
SELECT LOCALTIME() -- 当前时间
SELECT SYSDATE() -- 系统时间
-- 2021-01-23 20:23:55

SELECT YEAR(NOW()) -- 获取年份
-- 2021
SELECT MONTH(NOW()) -- 获取月份
-- 1
SELECT DAY(NOW()) -- 获取日
-- 23
SELECT MINUTE(NOW()) -- 获取分
-- 25
SELECT SECOND(NOW()) -- 获取秒
-- 57

-- 系统
SELECT SYSTEM_USER() -- 获取当前用户
-- root@localhost
SELECT USER() -- 获取用户
-- root@localhost
SELECT VERSION() -- 获取mysql版本信息
-- 5.7.19</code></pre>
<h3 id="5-2-聚合函数（常用）"><a href="#5-2-聚合函数（常用）" class="headerlink" title="5.2 聚合函数（常用）"></a>5.2 聚合函数（常用）</h3><div class="table-container">
<table>
<thead>
<tr>
<th>函数名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>COUNT()</strong></td>
<td>计数</td>
</tr>
<tr>
<td>SUM()</td>
<td>计和</td>
</tr>
<tr>
<td>AVG()</td>
<td>平均值</td>
</tr>
<tr>
<td>MAX()</td>
<td>最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>最小值</td>
</tr>
<tr>
<td>……</td>
<td>……</td>
</tr>
</tbody>
</table>
</div>
<pre><code class="hljs mysql">-- 聚合函数
-- 都能够统计表中的数据(想查询一个表中有多少条记录，就用这个count())

-- count(‘字段’)：忽略NULL
-- count(*):不会忽略NULL，本质计算行数
-- count(1):不会忽略NULL，本质计算行数

SELECT COUNT(&#96;studentname&#96;) FROM &#96;student&#96;; -- count(指定列)
-- 3
SELECT COUNT(*) FROM &#96;student&#96;; -- count(*)
-- 3
SELECT COUNT(1) FROM &#96;student&#96;; -- count(1)
-- 3
SELECT COUNT(1) FROM &#96;result&#96;; -- count(1)
-- 5

SELECT SUM(&#96;studentresult&#96;) AS 总和 FROM &#96;result&#96;
SELECT AVG(&#96;studentresult&#96;) AS 平均分 FROM &#96;result&#96;
SELECT MAX(&#96;studentresult&#96;) AS 最高分 FROM &#96;result&#96;
SELECT MIN(&#96;studentresult&#96;) AS 最低分 FROM &#96;result&#96;</code></pre>
<h3 id="5-3-数据库级别的MD5加密（扩展）"><a href="#5-3-数据库级别的MD5加密（扩展）" class="headerlink" title="5.3 数据库级别的MD5加密（扩展）"></a>5.3 数据库级别的MD5加密（扩展）</h3><p>什么是MD5？</p>
<p>主要增强算法复杂度和不可逆性。</p>
<p>MD5不可逆，具体的值的md5是一样的。</p>
<p>MD5破解网站的原理，背后有一个字典，MD5加密后的值加密的值。</p>
<pre><code class="hljs mysql">-- 测试MD5加密

CREATE TABLE &#96;testmd5&#96;(
	&#96;id&#96; INT(4) NOT NULL,
	&#96;name&#96; VARCHAR(20) NOT NULL,
	&#96;pwd&#96; VARCHAR(50) NOT NULL,
	PRIMARY KEY(&#96;id&#96;)
) ENGINE&#x3D;INNODB DEFAULT CHARSET&#x3D;utf8

-- 明文密码
INSERT INTO testmd5 VALUES(1,&#39;zhangsan&#39;,&#39;123456&#39;),(2,&#39;lisi&#39;,&#39;123456&#39;)

-- 加密
UPDATE testmd5 SET pwd&#x3D;MD5(pwd) WHERE id &#x3D;1</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124115455.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 全部加密
UPDATE testmd5 SET pwd&#x3D;MD5(pwd)</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124115512.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">
-- 插入的时候加密
INSERT INTO testmd5 VALUES(5,&#39;baixf&#39;,MD5(&#39;123456&#39;)),(4,&#39;xyz&#39;,MD5(&#39;123456&#39;))</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124115528.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">
-- 如何校验：123456
-- 将用户传递进来的密码，进行md5加密，然后对比加密后的值
SELECT * FROM testmd5 WHERE &#96;name&#96;&#x3D;&#39;baixf&#39; &amp;&amp; &#96;pwd&#96;&#x3D;MD5(&#39;123456&#39;)</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124115539.png" srcset="/img/loading.gif" alt=""></p>
<h2 id="6-事务"><a href="#6-事务" class="headerlink" title="6.事务"></a>6.事务</h2><h3 id="6-1-什么是事务"><a href="#6-1-什么是事务" class="headerlink" title="6.1 什么是事务"></a>6.1 什么是事务</h3><hr>
<p>1.SQL执行  A给B转账 A 1000   ———》200  B200</p>
<p>2.SQL执行  B收到A的钱  A 800 ———-》B  400</p>
<hr>
<p>将一组SQL放在一个批次中执行~</p>
<blockquote>
<p>事务原则：ACID原则 原子性 一致性 隔离性 持久性</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dengjili/article/details/82468576">参考链接</a></p>
<p><strong>原子性</strong></p>
<p>要么都成功，要么都失败</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20180906211811672.png" srcset="/img/loading.gif" alt=""></p>
<p>这个过程包含两个步骤</p>
<p>A： 800 - 200 = 600<br>B: 200 + 200 = 400</p>
<p>原子性表示，这两个步骤一起成功，或者一起失败，不能只发生其中一个动作</p>
<p><strong>一致性（Consistency）</strong></p>
<p>针对一个事务操作前与操作后的状态一致</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20180906211811672.png" srcset="/img/loading.gif" alt=""></p>
<p>操作前A：800，B：200<br>操作后A：600，B：400</p>
<p>一致性表示事务完成后，符合逻辑运算</p>
<p><strong>持久性（Durability）</strong>— 事务提交</p>
<p>表示事务结束后的数据不随着外界原因导致数据丢失，事务一旦提交不可逆。</p>
<p>操作前A：800，B：200<br>操作后A：600，B：400<br>如果在操作前（事务还没有提交）服务器宕机或者断电，那么重启数据库以后，数据状态应该为<br>A：800，B：200<br>如果在操作后（事务已经提交）服务器宕机或者断电，那么重启数据库以后，数据状态应该为<br>A：600，B：400</p>
<p> <strong>隔离性（Isolation）</strong></p>
<p>针对多个用户同时操作，数据库为每个用户开启的事务，不会被其他用户操作的数据所干扰。</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20180907101233416.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20200111115243422.png" srcset="/img/loading.gif" alt=""></p>
<blockquote>
<p>事务的隔离级别</p>
</blockquote>
<p><strong>脏读：</strong></p>
<p>指一个事务读取了另外一个事务未提交的数据。</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20200111114825772.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>不可重复读：</strong></p>
<p>在一个事务内读取表中的某一行数据，多次读取结果不同。（这个不一定是错误，只是某些场合不对）</p>
<p>页面统计查询值</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20180907105351860.png" srcset="/img/loading.gif" alt=""></p>
<p>点击生成报表的时候，B有人转账进来300（事务已经提交）</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20180907105428179.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>虚读(幻读)</strong></p>
<p>是指在一个事务内读取到了别的事务插入的数据，导致前后读取不一致。<br>（一般是行影响，多了一行）</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/20180907105623839.png" srcset="/img/loading.gif" alt=""></p>
<blockquote>
<p>执行事务</p>
</blockquote>
<pre><code class="hljs mysql">-- 事务
-- mysql默认开启事务自动提交的
SET autocommit&#x3D;0  -- 关闭
SET autocommit&#x3D;1  -- 默认开启

-- 手动处理事务
SET sutocommit&#x3D;1 -- 关闭自动提交

-- 事务开启
START TRANSACTION -- 标记一个事务的开启，从这之后的sql都在同一个事务里

INSERT ***
INSERT ***

-- 提交：持久化（成功！）
COMMIT
-- 回滚：回到原来的样子（失败！）
ROLLBACK

-- 事务结束
SET autocommit&#x3D;0 -- 开启自动提交

-- 了解
SAVEPOINT 保存点名 -- 设置一个事物的保存点

-- 回滚到保存点
ROLLBACK TO SAVEPOINT 保存点名

-- 撤销保存点
RELEASE SAVEPOINT 保存点名</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124152456.png" srcset="/img/loading.gif" alt=""></p>
<blockquote>
<p>模拟转账实例</p>
</blockquote>
<pre><code class="hljs mysql">-- 转账
CREATE DATABASE &#96;shop&#96; CHARACTER SET utf8 COLLATE utf8_general_ci
USE shop
CREATE TABLE &#96;acount&#96;(
	&#96;id&#96; INT(3) NOT NULL AUTO_INCREMENT,
	&#96;name&#96; VARCHAR(20) NOT NULL,
	&#96;money&#96; DECIMAL(9,2) NOT NULL,
	PRIMARY KEY(&#96;id&#96;)
)ENGINE&#x3D;INNODB DEFAULT CHARSET&#x3D;utf8

INSERT INTO &#96;acount&#96;(&#96;name&#96;,&#96;money&#96;)
VALUES (&#39;A&#39;,500.00),(&#39;B&#39;,1000.00)

-- 事务
SET autocommit&#x3D;0; -- 关闭事务提交

START TRANSACTION; -- 事务开始

UPDATE &#96;acount&#96; SET &#96;money&#96;&#x3D;&#96;money&#96;-200 WHERE &#96;name&#96;&#x3D;&#39;A&#39;;
UPDATE &#96;acount&#96; SET &#96;money&#96;&#x3D;&#96;money&#96;+200 WHERE &#96;name&#96;&#x3D;&#39;B&#39;;

COMMIT; -- 提交，事务一旦被提交就无法回滚
ROLLBACK; -- 回滚

SET autocommit&#x3D;1; -- 开启事务自动提交，恢复默认值</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124203912.png" srcset="/img/loading.gif" alt=""></p>
<h2 id="7-索引"><a href="#7-索引" class="headerlink" title="7. 索引"></a>7. 索引</h2><blockquote>
<p>MySQL官方对索引的定义为：<strong>索引（Index)是帮助MySQL高效获取数据的数据结构。</strong>提取句子主干，就可以得到索引的本质:索引是数据结构。</p>
</blockquote>
<h3 id="7-1-索引的分类"><a href="#7-1-索引的分类" class="headerlink" title="7.1 索引的分类"></a>7.1 索引的分类</h3><ul>
<li><p>主键索引 PRIMARY KEY</p>
  <pre><code class="hljs mysql">唯一的标识，不可重复，只能有一个</code></pre>
</li>
<li><p>唯一索引 UNIQUE KEY</p>
  <pre><code class="hljs mysql">避免重复的列出现，唯一索引可以重复，多个列都可以表示 唯一索引</code></pre>
</li>
<li><p>常规索引 KEY/INDEX</p>
  <pre><code class="hljs mysql">默认的</code></pre>
</li>
<li><p>全文索引 FullText</p>
</li>
</ul>
<pre><code class="hljs mysql">在特定的数据库引擎下才有，快速定位数据</code></pre>
<pre><code class="hljs mysql">-- 索引
-- 索引的使用
-- 1、在创建表的时候给字段增加索引
-- 2、创建完毕后，增加索引

-- 显示所有的索引信息
SHOW INDEX FROM student

-- 增加一个全文索引(索引名）列名
ALTER TABLE student ADD FULLTEXT INDEX &#96;studentname&#96;(&#96;studentname&#96;);</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124163553.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- explain查看sql执行状况
EXPLAIN SELECT * FROM student --常规索引，非全文索引</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124163927.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">EXPLAIN SELECT * FROM student WHERE MATCH(&#96;studentname&#96;) AGAINST(&#39;赵&#39;);</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124164439.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="7-2-模拟测试"><a href="#7-2-模拟测试" class="headerlink" title="7.2 模拟测试"></a>7.2 模拟测试</h3><p><strong>执行下面语句</strong></p>
<pre><code class="hljs mysql">CREATE TABLE &#96;app_user&#96; (
&#96;id&#96; BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
&#96;name&#96; VARCHAR(50) DEFAULT&#39;&#39; COMMENT&#39;用户昵称&#39;,
&#96;email&#96; VARCHAR(50) NOT NULL COMMENT&#39;用户邮箱&#39;,
&#96;phone&#96; VARCHAR(20) DEFAULT&#39;&#39; COMMENT&#39;手机号&#39;,
&#96;gender&#96; TINYINT(4) UNSIGNED DEFAULT &#39;0&#39;COMMENT &#39;性别（0：男;1:女）&#39;,
&#96;password&#96; VARCHAR(100) NOT NULL COMMENT &#39;密码&#39;,
&#96;age&#96; TINYINT(4) DEFAULT&#39;0&#39;  COMMENT &#39;年龄&#39;,
&#96;create_time&#96; DATETIME DEFAULT CURRENT_TIMESTAMP,
&#96;update_time&#96; TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY (&#96;id&#96;)
) ENGINE&#x3D;INNODB DEFAULT CHARSET&#x3D;utf8 COMMENT &#x3D; &#39;app用户表&#39;


-- 插入100万数据.
DELIMITER $$
-- 写函数之前必须要写，标志
CREATE FUNCTION mock_data ()
RETURNS INT
BEGIN
	DECLARE num INT DEFAULT 1000000;
	DECLARE i INT DEFAULT 0;
	WHILE i&lt;num DO
		INSERT INTO &#96;app_user&#96;(&#96;name&#96;,&#96;eamil&#96;,&#96;phone&#96;,&#96;gender&#96;)VALUES(CONCAT(&#39;用户&#39;,i),&#39;19224305@qq.com&#39;,&#39;123456789&#39;,FLOOR(RAND()*2));
		SET i&#x3D;i+1;
	END WHILE;
	RETURN i;
END;

SELECT mock_data() -- 执行此函数 生成一百万条数据


-- 拓展：删除函数
DROP FUNCTION &#96;school&#96;.&#96;mock_data&#96;;</code></pre>
<pre><code class="hljs mysql">SELECT * FROM &#96;app_user&#96; WHERE &#96;name&#96;&#x3D;&#39;用户911&#39;
-- 查询很慢  总耗时:3.531 sec

EXPLAIN SELECT * FROM &#96;app_user&#96; WHERE &#96;name&#96;&#x3D;&#39;用户911&#39; 
-- 总耗时: 0.120 sec

-- id_表名_字段名
-- CREATE INDEX索引名on表(字段)
CREATE INDEX id_app_user_name ON app_user(&#96;name&#96;);
-- 总耗时      : 17.448 sec
SELECT * FROM &#96;app_user&#96; WHERE &#96;name&#96;&#x3D;&#39;用户911&#39;
-- 就很快~，总耗时      : 0.101 sec</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124203204.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124203136.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>重点：索引在小数据量的时候，用户不大，但是在大数据的时候，区别十分明显~</strong></p>
<h3 id="7-3-索引原则"><a href="#7-3-索引原则" class="headerlink" title="7.3 索引原则"></a>7.3 索引原则</h3><ul>
<li>索引不是越多越好</li>
<li>不要对经常变动的数据加索引</li>
<li>小数据量的表不需要加索引</li>
<li>索引一般加在常用查询的字段中</li>
</ul>
<blockquote>
<p>拓展：索引的数据结构</p>
</blockquote>
<p>Hash 类型的索引</p>
<p><a target="_blank" rel="noopener" href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html">拓展必看文章 30分钟 细读</a></p>
<p>Btree:InnoDB 的默认数据结构~</p>
<h2 id="8-权限管理和备份"><a href="#8-权限管理和备份" class="headerlink" title="8. 权限管理和备份"></a>8. 权限管理和备份</h2><h3 id="8-1用户管理"><a href="#8-1用户管理" class="headerlink" title="8.1用户管理"></a>8.1用户管理</h3><blockquote>
<p>SQL yog可视化管理</p>
</blockquote>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124204658.png" srcset="/img/loading.gif" alt=""></p>
<blockquote>
<p>SQL 命令操作</p>
</blockquote>
<p>用户表：mysql.user</p>
<p>本质：对这张表进行增删改查</p>
<pre><code class="hljs mysql">-- 创建用户
CREATE USER baixf IDENTIFIED BY &#39;123456&#39;</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124210354.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 修改密码(修改当前用户密码)
SET PASSWORD&#x3D;PASSWORD(&#39;111111&#39;)

-- 修改指定用户密码
SET PASSWORD FOR baixf&#x3D;PASSWORD(&#39;111111&#39;)</code></pre>
<pre><code class="hljs mysql">-- 给用户重命名  RENAME USER 原名字 TO 新名字
RENAME USER baixf TO baixftk</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124210622.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 用户授权, 库.表 (*.*:全部库的全部表)
-- 除了给其他用户授权其他都能干
GRANT ALL PRIVILEGES ON *.*  TO baixftk</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124210738.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 查看权限
SHOW GRANTS FOR baixftk -- 查看指定用户的权限
-- GRANT ALL PRIVILEGES ON *.* TO &#39;baixftk&#39;@&#39;%&#39;
SHOW GRANTS FOR root@localhost
-- GRANT PROXY ON &#39;&#39;@&#39;&#39; TO &#39;root&#39;@&#39;localhost&#39; WITH GRANT OPTION</code></pre>
<pre><code class="hljs mysql">-- 撤销权限 REVOKE 哪些权限 ，在那个撤销，给谁撤销
REVOKE ALL PRIVILEGES ON *.* FROM baixftk</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124211214.png" srcset="/img/loading.gif" alt=""></p>
<pre><code class="hljs mysql">-- 删除用户
DROP USER baixftk</code></pre>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124211439.png" srcset="/img/loading.gif" alt=""></p>
<h3 id="8-2-数据库备份"><a href="#8-2-数据库备份" class="headerlink" title="8.2 数据库备份"></a>8.2 数据库备份</h3><p>为什么备份？</p>
<ul>
<li>保证重要的数据不丢失</li>
<li>数据转移A-》B</li>
</ul>
<p>MySQL数据库备份的方式</p>
<ul>
<li>直接拷贝物理文件</li>
<li>使用SQLyog等可视化管理工具上手动导出</li>
</ul>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210124214715.png" srcset="/img/loading.gif" alt=""></p>
<ul>
<li>使用命令行 <code>mysqldump</code>在命令行使用</li>
</ul>
<pre><code class="hljs shell">mysqldump localhost -uroot -p123456 school student &gt;d:/桌面/a.sql</code></pre>
<pre><code class="hljs mysql"># mysq1dump -h 主机 -u用户名 -p 密码 数据库 表名&gt;物理磁盘位置&#x2F;文件名
mysq1dump -h 1ocalhost -uroot -p123456 school student &gt;D:&#x2F;a.sq1

# mysq1dump -h 主机 -u用户名 -p 密码 数据库 表1 表2 表3 &gt;物理磁盘位置&#x2F;文件名
mysqldump -h 1oca1host -uroot -p123456 schoo1 student &gt;D:&#x2F;a.sq1</code></pre>
<pre><code class="hljs mysql">-- 导入
-- 登陆的情况下，切换到指定的数据库
-- source 备份文件
source d:&#x2F;a.sql

mysql -u用户名 -p密码 库名&lt;备份文件</code></pre>
<h2 id="9-规范数据库设计"><a href="#9-规范数据库设计" class="headerlink" title="9. 规范数据库设计"></a>9. 规范数据库设计</h2><h3 id="9-1-为什么需要设计"><a href="#9-1-为什么需要设计" class="headerlink" title="9.1 为什么需要设计"></a>9.1 为什么需要设计</h3><p><strong>当数据库比较复杂的时候，我们就需要设计</strong></p>
<p>糟糕的数据库设计：</p>
<ul>
<li>数据冗余，浪费空间</li>
<li>数据库插入和删除都会麻烦、异常[屏蔽使用外键]</li>
<li>程序性能差</li>
</ul>
<p>良好的数据库设计：</p>
<ul>
<li>节省内存空间</li>
<li>保证数据库完整性</li>
<li>方便我们开发系统</li>
</ul>
<p><strong>软件开发中，关于数据库设计</strong></p>
<ul>
<li>分析需求：分析业务和需要处理的数据的要求</li>
<li>概要设计：设计关系图E-R图</li>
</ul>
<p><strong>设计数据库的步骤：（个人博客）</strong></p>
<ul>
<li><p>收集信息，分析需求 (尽可能全，避免修改)</p>
<pre><code>    * 用户表（用户登录注销，用户的个人信息，写博客，创建分类）
    * 分类表（文章分类，谁创建的）
    * 文章表（文章的信息）
    * 友链表（友链信息）
    * 自定义表（系统信息，某个关键字，或者一些字段）key:value
</code></pre><p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/%E7%94%A8%E6%88%B7%E8%A1%A8.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/%E5%85%B3%E6%B3%A8%E8%A1%A8.png" srcset="/img/loading.gif" alt=""></p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/%E5%88%86%E7%B1%BB%E8%A1%A8.png" srcset="/img/loading.gif" alt=""></p>
</li>
</ul>
<p>  <img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/%E6%96%87%E7%AB%A0%E8%A1%A8.png" srcset="/img/loading.gif" alt=""></p>
<p>  <img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/%E8%AF%84%E8%AE%BA%E8%A1%A8.png" srcset="/img/loading.gif" alt=""></p>
<p>  <img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/%E5%8F%8B%E9%93%BE%E8%A1%A8.png" srcset="/img/loading.gif" alt=""></p>
<ul>
<li>标识实体（把需求落地到每个字段）</li>
<li>标识实体之间的关系<pre><code>   * 写博客：user -&gt;blog
   * 创建分类：user -&gt;category
   * 关注：user-&gt;user
   * 友链：links
   * 评论：user-user-blog
</code></pre></li>
</ul>
<blockquote>
<p>类似系统：BBS、CM……</p>
</blockquote>
<h3 id="9-2-三大范式"><a href="#9-2-三大范式" class="headerlink" title="9.2 三大范式"></a>9.2 三大范式</h3><p><strong>为什么需要数据规范化？</strong></p>
<ul>
<li><p>信息会重复</p>
</li>
<li><p>更新会导致异常</p>
</li>
<li><p>插入异常</p>
<pre><code>    * 无法正常显示信息
</code></pre></li>
<li><p>删除异常</p>
<ul>
<li>丢失有效数据</li>
</ul>
</li>
</ul>
<blockquote>
<p>三大范式</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wsg25/p/9615100.html"><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wsg25/p/9615100.html">关系型数据库设计：三大范式的通俗理解</a></a></p>
<p><strong>第一范式（1NF）</strong></p>
<p>原子性：保证每一列不可分</p>
<p>举例说明：</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/1218459-20180909201651535-1215699096.png" srcset="/img/loading.gif" alt=""></p>
<p>在上面的表中，“家庭信息”和“学校信息”列均不满足原子性的要求，故不满足第一范式，调整如下：</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/1218459-20180909202243826-1032549277.png" srcset="/img/loading.gif" alt=""></p>
<p>可见，调整后的每一列都是不可再分的，因此满足第一范式（1NF）；</p>
<p><strong>第二范式（2NF）</strong></p>
<p>前提：满足第一范式</p>
<p>每张表只描述一件事情</p>
<p>举例说明：</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/1218459-20180909204750951-639647799.png" srcset="/img/loading.gif" alt=""></p>
<p>在上图所示的情况中，同一个订单中可能包含不同的产品，因此主键必须是“订单号”和“产品号”联合组成，</p>
<p>但可以发现，产品数量、产品折扣、产品价格与“订单号”和“产品号”都相关，但是订单金额和订单时间仅与“订单号”相关，与“产品号”无关，</p>
<p>这样就不满足第二范式的要求，调整如下，需分成两个表：</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/1218459-20180909210444227-1008056975.png" srcset="/img/loading.gif" alt=""></p>
<p><strong>第三范式（3NF）</strong></p>
<p>前提：满足第一范式、第二范式</p>
<p>第三范式需要确保数据表中的每一列数据都和主键有关，而不能间接相关。</p>
<p>举例说明：</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/1218459-20180909211311408-1364899740.png" srcset="/img/loading.gif" alt=""></p>
<p>上表中，所有属性都完全依赖于学号，所以满足第二范式，但是“班主任性别”和“班主任年龄”直接依赖的是“班主任姓名”，</p>
<p>而不是主键“学号”，所以需做如下调整：</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/1218459-20180909211539242-1391100354.png" srcset="/img/loading.gif" alt=""></p>
<p>这样以来，就满足了第三范式的要求。</p>
<p>ps:如果把上表中的班主任姓名改成班主任教工号可能更确切，更符合实际情况，不过只要能理解就行。</p>
<blockquote>
<p>拓展：规范数据库的设计</p>
</blockquote>
<p><strong>规范性和性能的问题</strong></p>
<p>阿里规定：关联查询的表不得超过三张</p>
<ul>
<li>考虑商业化的需求和目标，（成本，用户体验-&gt;被迫不需要关联查询！）数据库的性能更加重要。</li>
<li>在规范性能的问题的时候，需要适当的考虑一下规范性！</li>
<li>故意给某些表增加一些荣誉的字段。（从夺标查询变为单表查询）</li>
<li>故意增加一些计算列（从大数据量减为小数据量的查询；添加索引）</li>
</ul>
<h2 id="10-JDBC"><a href="#10-JDBC" class="headerlink" title="10. JDBC"></a>10. JDBC</h2><h3 id="10-1-数据库驱动"><a href="#10-1-数据库驱动" class="headerlink" title="10.1 数据库驱动"></a>10.1 数据库驱动</h3><p>驱动：声卡、显卡、数据库</p>
<p><img src="https://gitee.com/bai_xiao_fei/picture/raw/master/PicGo/QQ%E6%88%AA%E5%9B%BE20210125121635.png" srcset="/img/loading.gif" alt=""></p>
<p>我们的程序会通过数据库驱动和数据库打交道！</p>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1NJ411J79W?p=1">狂神说B站视频</a>
<a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://www.mysql.com/">MySQL官网</a>
<a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://www.runoob.com/mysql/mysql-tutorial.html">MySQL教程</a>
<a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E4%B9%A0/MySQL/">MySQL</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E7%8B%82%E7%A5%9E/">狂神</a>
                    
                      <a class="hover-with-bg" href="/tags/MySQL/">MySQL</a>
                    
                      <a class="hover-with-bg" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/02/02/Java/Java%E5%AD%A6%E4%B9%A0/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Java学习</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/01/20/Docker/Docker%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0/">
                        <span class="hidden-mobile">Docker深入学习</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.staticfile.org/valine/1.4.14/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "gn6pMOQ2Y8601y9txmR9s4DN-gzGzoHsz",
          app_key: "KYnH8MyyiQBXK8hMwO7HevEw",
          placeholder: "说点什么",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: false,
          recordIP: false,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":200})
    NProgress.start()
    document.addEventListener('DOMContentLoaded', function() {
      window.NProgress && window.NProgress.inc();
    })
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js" ></script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?32cfe221d23ea3ac2ca847f1e865c570";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
